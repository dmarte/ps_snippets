(()=>{"use strict";var n,t,e=function(n){var t,e=new URLSearchParams(null!==(t=window.top.location.search)&&void 0!==t?t:"");return n.reduce((function(n,t){var r;return n[t]=null!==(r=e.get(t))&&void 0!==r?r:null,n}),{})},r=function(n){var t,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return null===(t=Object.keys(e))||void 0===t?void 0:t.reduce((function(n,t){var r;return(n+"").replace(new RegExp("{".concat(t,"}"),"g"),null!==(r=e[t])&&void 0!==r?r:"")}),n)},i=function(n,t){return Object.keys(n).reduce((function(e,r){return t[r]&&(e[n[r]]=t[r]),e}),{})},o=function(n){var t,e=(n+"").match(/({[a-zA-Z_-]+})/g);return Array.isArray(e)&&null!==(t=null==e?void 0:e.map((function(n){return n.replace(/([{}])/gi,"")})))&&void 0!==t?t:[]},a=function(n,t){return n.parentNode.insertBefore(t,n.nextSibling)},u={enabled:function(n,t){return!!n.dataset[t]&&("true"===n.dataset[t]||"1"===n.dataset[t])},outerHeight:function(n){var t,e;return n.offsetHeight+(parseInt((null===(t=n.style)||void 0===t?void 0:t.marginTop)||0)||0)+(parseInt((null===(e=n.style)||void 0===e?void 0:e.marginBottom)||0)||0)},draw:function(n){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},e=document.createElement("template");return e.innerHTML=(n+"").replace(/(\r\n|\n|\r)(\s{2})+/gm,""),Object.keys(t).forEach((function(n){e.content.firstChild[n]=t[n]})),e.content.firstChild},findOrFail:function(n){var t=this.find(n);if(!t)throw new DOMException("No elements found for ".concat(n,"."));return t},find:function(n){return document.querySelector(n)},when:function(n){return new Promise((function(t){try{var e=u.findOrFail(n);t(e)}catch(e){var r=new MutationObserver((function(){var e=u.find(n);e&&(r.disconnect(),t(e))}));r.observe(document.body,{childList:!0,subtree:!0})}}))}};n=window,t=function(n){var t=this;this.$config={params:{},url:""},this.take=function(n){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";return t||(t=n),this.$config.params[n]=t,this},this.getParamsToUse=function(){return e(Object.keys(t.$config.params))},this.getParamsToBeSet=function(){return i(t.$config.params,t.getParamsToUse())},this.getUrl=function(){return r(t.$config.url,t.getParamsToBeSet())},this.url=function(n){return this.$config.url=n,this},this.start=function(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"#SurveyAdapter";return u.when(e).then((function(e){var r,i,c,l,s=u.draw('\n                         <button \n                             type="button"\n                             style="\n                                 display:none;\n                                 width: 250px; \n                                 height: 50px;\n                                 margin: 40px 0 40px calc(50% - 125px); \n                                 background-color: #5abf59; \n                                 color: white;\n                                 border: none;\n                                 border-radius: 7px;\n                                 font-size: 22px;\n                                 font-weight: bold;\n                                 font-family: sans-serif;\n                                 cursor: pointer;\n                                 "\n                         >\n                             '.concat(null!==(r=e.dataset.text)&&void 0!==r?r:"Return to Survey","\n                         </button>\n                     "),{renderOnFloating:function(){},renderOnGeneric:function(n){a(n.wrapper.firstChild,s)},showOnGeneric:function(n){var t=n.wrapper.firstChild,e=n.wrapper.closest(".adBreak"),r=u.outerHeight(t)+u.outerHeight(s);e.style.height="".concat(r,"px"),s.style.display="block"},showOnFloating:function(){s.style.position="fixed",s.style.top="-35px",s.style.left="calc(50% - 50%)",s.style.boxShadow="1px 5px 8px rgb(0 0 0 / 44%)",s.style.display="block"},show:function(){u.enabled(e,"floating")?this.showOnFloating(n.vplacement()):this.showOnGeneric(n.vplacement())}});if(!e.dataset.target)throw new TypeError('SurveyAdapter you need to specify the "data-target" attribute in the script tag to use this adapter.');var d=(null!==(i=null==e||null===(c=e.dataset)||void 0===c?void 0:c.target)&&void 0!==i?i:"")+"";if(o(d).forEach((function(n){return t.take(n)})),t.url(d),s.addEventListener("click",(function(){window.open(t.getUrl(),"_blank")})),u.enabled(e,"floating")?s.renderOnFloating():s.renderOnGeneric(),null===(l=n.runtime().creative.mainCreativeViewed)||void 0===l||!l)return n.listeners.add("onStandardEventTracked",(function(n){"main creative viewed"===n.label&&s.show()})),t;s.show()})),this}},n.onload=function(){var e,r,i=n.__simpli;if(void 0===i)throw new TypeError("SurveyAdapter rely on Simpli Tag script. PLease include the required script first.");return null!=i&&null!==(e=i.runtime())&&void 0!==e&&null!==(r=e.environment)&&void 0!==r&&r.isFriendlyIframe?void(n.SurveyAdapter=new t(i).start()):this}})();
//# sourceMappingURL=surveyAdapter.bundle.min.js.map