var l = Object.defineProperty;
var o = (i, e, t) => e in i ? l(i, e, { enumerable: !0, configurable: !0, writable: !0, value: t }) : i[e] = t;
var n = (i, e, t) => (o(i, typeof e != "symbol" ? e + "" : e, t), t);
import c from "../../libs/lib-alpine.js";
class u {
  constructor(e) {
    n(this, "$config");
    this.$config = e;
  }
  async get(e, t) {
    const s = await fetch(this.url(e, t));
    return s.ok ? {
      failed: !1,
      message: s.statusText,
      data: await s.json() || await s.text()
    } : {
      failed: !0,
      message: s.statusText,
      data: {}
    };
  }
  url(e, t) {
    const s = new URLSearchParams(t);
    this.$config.authorization === "key" && s.set(this.$config.apiKeyName, this.$config.apiToken);
    const a = s.toString();
    return new URL(`${e}${a ? "?" + a : ""}`, this.$config.baseUrl);
  }
}
class d {
  constructor({ api: e, cache: t, key: s, debug: a, filters: r }) {
    n(this, "$api");
    n(this, "$cache");
    n(this, "$key");
    n(this, "$debugging");
    n(this, "$filters");
    n(this, "$state", c.reactive({
      season: "",
      loading: !1,
      weeks: 0,
      games: [],
      teams: []
    }));
    this.$api = e, this.$cache = t, this.$key = s, this.$debugging = a, this.$filters = r ?? {};
  }
  get weeks() {
    return this.$state.weeks;
  }
  get games() {
    const e = this.collectByFilters(this.$state.games);
    if (e.length < 1 && this.$state.games.length > 0) {
      const t = this.collectByFilters(this.$state.games, ["date"]);
      return Array(2).fill(void 0).map((s, a) => t[a] ? t[a] : s).filter((s) => s);
    }
    return e;
  }
  get channels() {
    return [...new Set(this.games.map((e) => e.Channel))];
  }
  get season() {
    return this.$state.season;
  }
  get teams() {
    return this.$state.teams;
  }
  get loading() {
    return this.$state.loading;
  }
  get currentWeek() {
    var e, t;
    return ((t = (e = this.games) == null ? void 0 : e.at(0)) == null ? void 0 : t.Week) ?? 0;
  }
  /**
   * Initialize the instance state.
   */
  async initialize() {
    return document.dispatchEvent(new CustomEvent("nfl:loading", {
      bubbles: !0,
      cancelable: !0,
      detail: { loading: !0 }
    })), this.$state.loading = !0, this.$debugging ? this.$state = await this.initState() : this.$state = await this.$cache.get(
      `NFLInstance.sync.${this.$key}`,
      async ({ cancel: e }) => {
        const t = await this.initState();
        return t.teams.length < 1 || t.games.length < 1 || !t.season ? e(t) : t;
      }
    ), setTimeout(() => {
      this.$state.loading = !1, document.dispatchEvent(new CustomEvent("nfl:loading", {
        bubbles: !0,
        cancelable: !0,
        detail: { loading: !1 }
      }));
    }, (window == null ? void 0 : window.NFL_LOADING_TIME) ?? 1e3), this;
  }
  async fetchSeasonCurrent() {
    const { data: e, failed: t } = await this.$api.get(
      "scores/json/CurrentSeason"
    );
    return t ? (/* @__PURE__ */ new Date()).getFullYear().toString() : e;
  }
  async fetchSeasonGames(e) {
    const { data: t, failed: s, message: a } = await this.$api.get(`scores/json/Scores/${e}`);
    if (s)
      throw TypeError(`NFLInstance.fetchSeasonGames: ${a}`);
    return t;
  }
  async fetchSeasonTeams(e) {
    const { data: t, failed: s, message: a } = await this.$api.get(`scores/json/Teams/${e}`);
    if (s)
      throw TypeError(`NFLInstance.fetchSeasonTeams: ${a}`);
    return t;
  }
  collectByFilters(e, t = []) {
    var s, a;
    return (s = this.$filters) != null && s.date && !t.includes("date") && (e = this.collectByFilterDate(e, this.$filters.date)), Array.isArray((a = this.$filters) == null ? void 0 : a.channels) && !t.includes("channels") && (e = this.collectByFilterChannels(
      e,
      this.$filters.channels
    )), e;
  }
  collectByFilterChannels(e, t) {
    return e.filter((s) => t.includes(s.Channel));
  }
  collectByFilterDate(e, t) {
    return e.filter(
      (s) => s.Day.substring(0, 10) === t.substring(0, 10)
    );
  }
  async initState() {
    const e = await this.fetchSeasonCurrent(), t = await this.fetchSeasonGames(e), s = await this.fetchSeasonTeams(e), a = t.reduce((r, h) => r < h.Week ? h.Week : r, 0);
    return {
      season: e,
      teams: s,
      games: t,
      weeks: a,
      loading: !1
    };
  }
}
function g(i) {
  return {
    api: i.nfl,
    opened: !1,
    selected: {},
    homeTeam: {},
    awayTeam: {},
    async init() {
      !this.loading && !i.nfl.season && this.api.initialize();
    },
    get currentWeek() {
      var e;
      return ((e = i.nfl) == null ? void 0 : e.currentWeek) ?? 0;
    },
    get weeks() {
      return i.nfl.weeks;
    },
    get loading() {
      return i.nfl.loading;
    },
    get games() {
      return i.nfl.games;
    },
    get hasNoAvailableGames() {
      return !this.loading && this.games.length < 1;
    },
    get isReady() {
      return !this.opened && !this.loading && this.games.length > 0;
    },
    get seasonTitle() {
      var t;
      if (!this.selected)
        return "";
      const e = (t = this.selected.Season) == null ? void 0 : t.toString();
      return e != null && e.endsWith("PRE") ? "Pre-Season" : e != null && e.endsWith("POST") ? "Post-Season" : "Regular Season";
    },
    get stage() {
      if (!this.selected)
        return "";
      const e = this.selected;
      return e.Status === "Scheduled" ? new Intl.DateTimeFormat(void 0, {
        hourCycle: "h12",
        hour: "2-digit",
        minute: "2-digit"
      }).format(new Date(e.DateTime)) : e.QuarterDescription ?? e.Status;
    },
    team(e) {
      return i.nfl.teams.find((t) => t.TeamID === e) ?? {};
    },
    open(e) {
      return this.selected = e, this.homeTeam = this.team(e.HomeTeamID), this.awayTeam = this.team(e.AwayTeamID), this.opened = !0, e;
    },
    close() {
      this.selected = {}, this.homeTeam = {}, this.awayTeam = {}, this.opened = !1;
    }
  };
}
class y {
  constructor() {
    /**
     * Network Service
     */
    n(this, "api");
    /**
     * Caching service
     */
    n(this, "cache");
    /**
     * NFL Service
     * @protected
     */
    n(this, "service");
    /**
     * Alpine service.
     * @protected
     */
    n(this, "alpine");
  }
  key() {
    return "SportDataNFL";
  }
  async boot({
    debug: e,
    parameters: t
  }) {
    if (!this.cache)
      throw TypeError("[PadSquad]:NFL - Service [cache] is required.");
    if (!this.api)
      throw TypeError("[PadSquad]:NFL - Service [api] is required.");
    if (!this.service)
      throw TypeError("[PadSquad]:NFL - Service [NFL] must be instantiated.");
    return e && console.debug(`[PadSquad]:${this.key()} Sport data BOOTED.`), t != null && t.startOnBoot && await this.service.initialize(), this.service;
  }
  async register(e) {
    var t, s, a, r;
    e.debug && console.debug(`[PadSquad]:${this.key()} Sport data REGISTERED.`), this.api = new u({
      apiToken: `${(t = e.parameters) == null ? void 0 : t.token}`,
      baseUrl: "https://api.sportsdata.io/v3/nfl/",
      apiKeyName: "key",
      authorization: "key"
    }), this.cache = e.engine.get("cache"), this.service = new d({
      key: ((s = e.parameters) == null ? void 0 : s.date) ?? (/* @__PURE__ */ new Date()).toISOString(),
      api: this.api,
      debug: e.debug,
      cache: this.cache,
      filters: {
        date: (a = e.parameters) == null ? void 0 : a.date,
        channels: (r = e.parameters) == null ? void 0 : r.channels
      }
    }), document.addEventListener("alpine:init", () => {
      this.alpine = e.engine.get("alpine"), this.registerComponents(e);
    });
  }
  registerComponents({ parameters: e }) {
    var t;
    (t = this.alpine) == null || t.data(
      "NFLGamesByDate",
      (s) => g({
        nfl: this.service,
        date: s ?? (e == null ? void 0 : e.date)
      })
    );
  }
}
export {
  y as default
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmZsLmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvY29yZS9TdXBwb3J0L1BzQXBpLnRzIiwiLi4vLi4vLi4vc3JjL3BhY2thZ2UvU3BvcnREYXRhL1NlcnZpY2VzL05mbEluc3RhbmNlLnRzIiwiLi4vLi4vLi4vc3JjL3BhY2thZ2UvU3BvcnREYXRhL0NvbXBvbmVudHMvTkZMR2FtZXNCeURhdGUudHMiLCIuLi8uLi8uLi9zcmMvcGFja2FnZS9TcG9ydERhdGEvUHJvdmlkZXJzL1Nwb3J0RGF0YU5GTFByb3ZpZGVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGF1dGhvciBEZWx2aSBNYXJ0ZSA8ZGVsdmkubWFydGVAZ21haWwuY29tPlxuICogQHBhY2thZ2UgUGFkc3F1YWQvU3VwcG9ydFxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQc0FwaSB7XG4gIHByaXZhdGUgJGNvbmZpZzogUHMuU3VwcG9ydC5BcGkuQ29uZmlnXG5cbiAgY29uc3RydWN0b3IoY29uZmlnOiBQcy5TdXBwb3J0LkFwaS5Db25maWcpIHtcbiAgICB0aGlzLiRjb25maWcgPSBjb25maWdcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBnZXQ8VD4ocGF0aDogc3RyaW5nLCBwYXJhbXM/OiB7IFtrZXk6IHN0cmluZ106IGFueSB9KSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh0aGlzLnVybChwYXRoLCBwYXJhbXMpKTtcblxuICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgIHJldHVybiA8UHMuU3VwcG9ydC5BcGkuUmVzcG9uc2U+e1xuICAgICAgICBmYWlsZWQ6IHRydWUsXG4gICAgICAgIG1lc3NhZ2U6IHJlc3BvbnNlLnN0YXR1c1RleHQsXG4gICAgICAgIGRhdGE6IHt9XG4gICAgICB9O1xuICAgIH1cblxuICAgIHJldHVybiA8UHMuU3VwcG9ydC5BcGkuUmVzcG9uc2U8VD4+e1xuICAgICAgZmFpbGVkOiBmYWxzZSxcbiAgICAgIG1lc3NhZ2U6IHJlc3BvbnNlLnN0YXR1c1RleHQsXG4gICAgICBkYXRhOiAoYXdhaXQgcmVzcG9uc2UuanNvbigpKSB8fCAoYXdhaXQgcmVzcG9uc2UudGV4dCgpKSxcbiAgICB9O1xuICB9XG5cbiAgcHJpdmF0ZSB1cmwocGF0aDogc3RyaW5nLCBwYXJhbXM/OiB7IFtrZXk6IHN0cmluZ106IGFueSB9KSB7XG4gICAgY29uc3QgcXVlcnkgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHBhcmFtcylcbiAgICBpZiAodGhpcy4kY29uZmlnLmF1dGhvcml6YXRpb24gPT09ICdrZXknKSB7XG4gICAgICBxdWVyeS5zZXQodGhpcy4kY29uZmlnLmFwaUtleU5hbWUsIHRoaXMuJGNvbmZpZy5hcGlUb2tlbilcbiAgICB9XG5cbiAgICBjb25zdCBxdWVyeVN0cmluZyA9IHF1ZXJ5LnRvU3RyaW5nKCk7XG4gICAgcmV0dXJuIG5ldyBVUkwoYCR7cGF0aH0ke3F1ZXJ5U3RyaW5nID8gJz8nICsgcXVlcnlTdHJpbmcgOiAnJ31gLCB0aGlzLiRjb25maWcuYmFzZVVybCk7XG4gIH1cbn1cblxuIiwiaW1wb3J0IEFscGluZSBmcm9tIFwiYWxwaW5lanNcIjtcbmltcG9ydCBDaGFubmVscyA9IFBzLlNwb3J0RGF0YS5DaGFubmVscztcblxudHlwZSBORkxJbnN0YW5jZUZpbHRlcnMgPSB7XG4gIGNoYW5uZWxzPzogKENoYW5uZWxzIHwgbnVsbClbXTtcbiAgZGF0ZT86IHN0cmluZztcbn07XG50eXBlIE5GTEluc3RhbmNlID0ge1xuICBrZXk6IHN0cmluZztcbiAgZGVidWc6IGJvb2xlYW47XG4gIGFwaTogUHMuU3VwcG9ydC5BcGkuSW5zdGFuY2U7XG4gIGNhY2hlOiBQcy5TdXBwb3J0LkNhY2hlLkluc3RhbmNlO1xuICBmaWx0ZXJzPzogTkZMSW5zdGFuY2VGaWx0ZXJzO1xufTtcbnR5cGUgTkZMSW5zdGFuY2VTdGF0ZSA9IHtcbiAgc2Vhc29uOiBzdHJpbmc7XG4gIHdlZWtzOiBudW1iZXI7XG4gIGdhbWVzOiBQcy5TcG9ydERhdGEuTkZMLkdhbWVTY29yZVtdO1xuICB0ZWFtczogUHMuU3BvcnREYXRhLk5GTC5UZWFtW107XG4gIGxvYWRpbmc6IGJvb2xlYW47XG59O1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTmZsSW5zdGFuY2UgaW1wbGVtZW50cyBQcy5TcG9ydERhdGEuTkZMLkluc3RhbmNlIHtcbiAgcHJpdmF0ZSByZWFkb25seSAkYXBpOiBQcy5TdXBwb3J0LkFwaS5JbnN0YW5jZTtcbiAgcHJpdmF0ZSByZWFkb25seSAkY2FjaGU6IFBzLlN1cHBvcnQuQ2FjaGUuSW5zdGFuY2U7XG4gIHByaXZhdGUgcmVhZG9ubHkgJGtleTogc3RyaW5nO1xuICBwcml2YXRlIHJlYWRvbmx5ICRkZWJ1Z2dpbmc6IGJvb2xlYW47XG4gIHByaXZhdGUgcmVhZG9ubHkgJGZpbHRlcnM6IE5GTEluc3RhbmNlRmlsdGVycztcblxuICBwcml2YXRlICRzdGF0ZTogTkZMSW5zdGFuY2VTdGF0ZSA9IEFscGluZS5yZWFjdGl2ZSh7XG4gICAgc2Vhc29uOiBcIlwiLFxuICAgIGxvYWRpbmc6IGZhbHNlLFxuICAgIHdlZWtzOiAwLFxuICAgIGdhbWVzOiBbXSxcbiAgICB0ZWFtczogW10sXG4gIH0pO1xuXG4gIGNvbnN0cnVjdG9yKHsgYXBpLCBjYWNoZSwga2V5LCBkZWJ1ZywgZmlsdGVycyB9OiBORkxJbnN0YW5jZSkge1xuICAgIHRoaXMuJGFwaSA9IGFwaTtcbiAgICB0aGlzLiRjYWNoZSA9IGNhY2hlO1xuICAgIHRoaXMuJGtleSA9IGtleTtcbiAgICB0aGlzLiRkZWJ1Z2dpbmcgPSBkZWJ1ZztcbiAgICB0aGlzLiRmaWx0ZXJzID0gZmlsdGVycyA/PyB7fTtcbiAgfVxuXG4gIGdldCB3ZWVrcygpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLiRzdGF0ZS53ZWVrcztcbiAgfVxuXG4gIGdldCBnYW1lcygpIHtcbiAgICBjb25zdCBnYW1lcyA9IHRoaXMuY29sbGVjdEJ5RmlsdGVycyh0aGlzLiRzdGF0ZS5nYW1lcyk7XG4gICAgaWYgKGdhbWVzLmxlbmd0aCA8IDEgJiYgdGhpcy4kc3RhdGUuZ2FtZXMubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgbG9jYWxHYW1lcyA9IHRoaXMuY29sbGVjdEJ5RmlsdGVycyh0aGlzLiRzdGF0ZS5nYW1lcywgW1wiZGF0ZVwiXSk7XG4gICAgICByZXR1cm4gQXJyYXkoMilcbiAgICAgICAgLmZpbGwodW5kZWZpbmVkKVxuICAgICAgICAubWFwKChfLCBpbmRleCkgPT4ge1xuICAgICAgICAgIGlmICghbG9jYWxHYW1lc1tpbmRleF0pIHtcbiAgICAgICAgICAgIHJldHVybiBfO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gbG9jYWxHYW1lc1tpbmRleF07XG4gICAgICAgIH0pXG4gICAgICAgIC5maWx0ZXIoKGkpID0+IGkpO1xuICAgIH1cbiAgICByZXR1cm4gZ2FtZXM7XG4gIH1cblxuICBnZXQgY2hhbm5lbHMoKSB7XG4gICAgcmV0dXJuIFsuLi5uZXcgU2V0KHRoaXMuZ2FtZXMubWFwKChnKSA9PiBnLkNoYW5uZWwpKV07XG4gIH1cblxuICBnZXQgc2Vhc29uKCkge1xuICAgIHJldHVybiB0aGlzLiRzdGF0ZS5zZWFzb247XG4gIH1cblxuICBnZXQgdGVhbXMoKTogUHMuU3BvcnREYXRhLk5GTC5UZWFtW10ge1xuICAgIHJldHVybiB0aGlzLiRzdGF0ZS50ZWFtcztcbiAgfVxuXG4gIGdldCBsb2FkaW5nKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLiRzdGF0ZS5sb2FkaW5nO1xuICB9XG5cbiAgZ2V0IGN1cnJlbnRXZWVrKCkge1xuICAgIHJldHVybiB0aGlzLmdhbWVzPy5hdCgwKT8uV2VlayA/PyAwO1xuICB9XG5cbiAgLyoqXG4gICAqIEluaXRpYWxpemUgdGhlIGluc3RhbmNlIHN0YXRlLlxuICAgKi9cbiAgYXN5bmMgaW5pdGlhbGl6ZSgpOiBQcm9taXNlPFBzLlNwb3J0RGF0YS5ORkwuSW5zdGFuY2U+IHtcbiAgICBcbiAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgnbmZsOmxvYWRpbmcnLCB7XG4gICAgICBidWJibGVzOiB0cnVlLFxuICAgICAgY2FuY2VsYWJsZTogdHJ1ZSxcbiAgICAgIGRldGFpbDogeyBsb2FkaW5nOiB0cnVlIH1cbiAgICB9KSlcblxuICAgIHRoaXMuJHN0YXRlLmxvYWRpbmcgPSB0cnVlO1xuICAgIGlmICh0aGlzLiRkZWJ1Z2dpbmcpIHtcbiAgICAgIHRoaXMuJHN0YXRlID0gYXdhaXQgdGhpcy5pbml0U3RhdGUoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy4kc3RhdGUgPSBhd2FpdCB0aGlzLiRjYWNoZS5nZXQ8TkZMSW5zdGFuY2VTdGF0ZT4oXG4gICAgICAgIGBORkxJbnN0YW5jZS5zeW5jLiR7dGhpcy4ka2V5fWAsXG4gICAgICAgIGFzeW5jICh7IGNhbmNlbCB9KSA9PiB7XG4gICAgICAgICAgY29uc3Qgc3RhdGUgPSBhd2FpdCB0aGlzLmluaXRTdGF0ZSgpO1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHN0YXRlLnRlYW1zLmxlbmd0aCA8IDEgfHxcbiAgICAgICAgICAgIHN0YXRlLmdhbWVzLmxlbmd0aCA8IDEgfHxcbiAgICAgICAgICAgICFzdGF0ZS5zZWFzb25cbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHJldHVybiBjYW5jZWwoc3RhdGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gc3RhdGU7XG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgfVxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuXG4gICAgICB0aGlzLiRzdGF0ZS5sb2FkaW5nID0gZmFsc2U7XG4gICAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgnbmZsOmxvYWRpbmcnLCB7XG4gICAgICAgIGJ1YmJsZXM6IHRydWUsXG4gICAgICAgIGNhbmNlbGFibGU6IHRydWUsXG4gICAgICAgIGRldGFpbDogeyBsb2FkaW5nOiBmYWxzZSB9XG4gICAgICB9KSlcbiAgICAgIC8vQHRzLWlnbm9yZVxuICAgIH0sIHdpbmRvdz8uTkZMX0xPQURJTkdfVElNRSA/PyAxMDAwKVxuICAgIFxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgYXN5bmMgZmV0Y2hTZWFzb25DdXJyZW50KCk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgY29uc3QgeyBkYXRhLCBmYWlsZWQgfSA9IGF3YWl0IHRoaXMuJGFwaS5nZXQ8c3RyaW5nPihcbiAgICAgIFwic2NvcmVzL2pzb24vQ3VycmVudFNlYXNvblwiXG4gICAgKTtcbiAgICBpZiAoZmFpbGVkKSB7XG4gICAgICByZXR1cm4gbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpLnRvU3RyaW5nKCk7XG4gICAgfVxuICAgIHJldHVybiBkYXRhO1xuICB9XG5cbiAgYXN5bmMgZmV0Y2hTZWFzb25HYW1lcyhcbiAgICBzZWFzb246IHN0cmluZ1xuICApOiBQcm9taXNlPFBzLlNwb3J0RGF0YS5ORkwuR2FtZVNjb3JlW10+IHtcbiAgICBjb25zdCB7IGRhdGEsIGZhaWxlZCwgbWVzc2FnZSB9ID0gYXdhaXQgdGhpcy4kYXBpLmdldDxcbiAgICAgIFBzLlNwb3J0RGF0YS5ORkwuR2FtZVNjb3JlW11cbiAgICA+KGBzY29yZXMvanNvbi9TY29yZXMvJHtzZWFzb259YCk7XG4gICAgaWYgKGZhaWxlZCkge1xuICAgICAgdGhyb3cgVHlwZUVycm9yKGBORkxJbnN0YW5jZS5mZXRjaFNlYXNvbkdhbWVzOiAke21lc3NhZ2V9YCk7XG4gICAgfVxuICAgIHJldHVybiBkYXRhO1xuICB9XG5cbiAgYXN5bmMgZmV0Y2hTZWFzb25UZWFtcyhzZWFzb246IHN0cmluZyk6IFByb21pc2U8UHMuU3BvcnREYXRhLk5GTC5UZWFtW10+IHtcbiAgICBjb25zdCB7IGRhdGEsIGZhaWxlZCwgbWVzc2FnZSB9ID0gYXdhaXQgdGhpcy4kYXBpLmdldDxcbiAgICAgIFBzLlNwb3J0RGF0YS5ORkwuVGVhbVtdXG4gICAgPihgc2NvcmVzL2pzb24vVGVhbXMvJHtzZWFzb259YCk7XG4gICAgaWYgKGZhaWxlZCkge1xuICAgICAgdGhyb3cgVHlwZUVycm9yKGBORkxJbnN0YW5jZS5mZXRjaFNlYXNvblRlYW1zOiAke21lc3NhZ2V9YCk7XG4gICAgfVxuICAgIHJldHVybiBkYXRhO1xuICB9XG5cbiAgY29sbGVjdEJ5RmlsdGVycyhcbiAgICBjb2xsZWN0aW9uOiBQcy5TcG9ydERhdGEuTkZMLkdhbWVTY29yZVtdLFxuICAgIHdpdGhvdXQ6IChcImRhdGVcIiB8IFwiY2hhbm5lbHNcIilbXSA9IFtdXG4gICk6IFBzLlNwb3J0RGF0YS5ORkwuR2FtZVNjb3JlW10ge1xuICAgIGlmICh0aGlzLiRmaWx0ZXJzPy5kYXRlICYmICF3aXRob3V0LmluY2x1ZGVzKFwiZGF0ZVwiKSkge1xuICAgICAgY29sbGVjdGlvbiA9IHRoaXMuY29sbGVjdEJ5RmlsdGVyRGF0ZShjb2xsZWN0aW9uLCB0aGlzLiRmaWx0ZXJzLmRhdGUpO1xuICAgIH1cblxuICAgIGlmIChcbiAgICAgIEFycmF5LmlzQXJyYXkodGhpcy4kZmlsdGVycz8uY2hhbm5lbHMpICYmXG4gICAgICAhd2l0aG91dC5pbmNsdWRlcyhcImNoYW5uZWxzXCIpXG4gICAgKSB7XG4gICAgICBjb2xsZWN0aW9uID0gdGhpcy5jb2xsZWN0QnlGaWx0ZXJDaGFubmVscyhcbiAgICAgICAgY29sbGVjdGlvbixcbiAgICAgICAgdGhpcy4kZmlsdGVycy5jaGFubmVsc1xuICAgICAgKTtcbiAgICB9XG5cbiAgICByZXR1cm4gY29sbGVjdGlvbjtcbiAgfVxuXG4gIGNvbGxlY3RCeUZpbHRlckNoYW5uZWxzKFxuICAgIGNvbGxlY3Rpb246IFBzLlNwb3J0RGF0YS5ORkwuR2FtZVNjb3JlW10sXG4gICAgY2hhbm5lbHM6IChQcy5TcG9ydERhdGEuQ2hhbm5lbHMgfCBudWxsKVtdXG4gICkge1xuICAgIHJldHVybiBjb2xsZWN0aW9uLmZpbHRlcigoZ2FtZSkgPT4gY2hhbm5lbHMuaW5jbHVkZXMoZ2FtZS5DaGFubmVsKSk7XG4gIH1cblxuICBjb2xsZWN0QnlGaWx0ZXJEYXRlKFxuICAgIGNvbGxlY3Rpb246IFBzLlNwb3J0RGF0YS5ORkwuR2FtZVNjb3JlW10sXG4gICAgZGF0ZTogc3RyaW5nXG4gICk6IFBzLlNwb3J0RGF0YS5ORkwuR2FtZVNjb3JlW10ge1xuICAgIHJldHVybiBjb2xsZWN0aW9uLmZpbHRlcihcbiAgICAgIChnYW1lKSA9PiBnYW1lLkRheS5zdWJzdHJpbmcoMCwgMTApID09PSBkYXRlLnN1YnN0cmluZygwLCAxMClcbiAgICApO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBpbml0U3RhdGUoKTogUHJvbWlzZTxORkxJbnN0YW5jZVN0YXRlPiB7XG4gICAgY29uc3Qgc2Vhc29uID0gYXdhaXQgdGhpcy5mZXRjaFNlYXNvbkN1cnJlbnQoKTtcbiAgICBjb25zdCBnYW1lcyA9IGF3YWl0IHRoaXMuZmV0Y2hTZWFzb25HYW1lcyhzZWFzb24pO1xuICAgIGNvbnN0IHRlYW1zID0gYXdhaXQgdGhpcy5mZXRjaFNlYXNvblRlYW1zKHNlYXNvbik7XG4gICAgY29uc3Qgd2Vla3MgPSBnYW1lcy5yZWR1Y2UoKHN1bW1hcnksIGdhbWUpID0+IHtcbiAgICAgIGlmIChzdW1tYXJ5IDwgZ2FtZS5XZWVrKSB7XG4gICAgICAgIHJldHVybiBnYW1lLldlZWs7XG4gICAgICB9XG4gICAgICByZXR1cm4gc3VtbWFyeTtcbiAgICB9LCAwKTtcbiAgICByZXR1cm4ge1xuICAgICAgc2Vhc29uLFxuICAgICAgdGVhbXMsXG4gICAgICBnYW1lcyxcbiAgICAgIHdlZWtzLFxuICAgICAgbG9hZGluZzogZmFsc2UsXG4gICAgfTtcbiAgfVxufVxuIiwiaW1wb3J0IHtBbHBpbmVDb21wb25lbnR9IGZyb20gXCJhbHBpbmVqc1wiO1xuXG50eXBlIE5GTEdhbWVCeURhdGVDb25maWcgPSB7XG4gIGRhdGU6IERhdGVcbiAgbmZsOiBQcy5TcG9ydERhdGEuTkZMLkluc3RhbmNlXG59XG5cbnR5cGUgTkZMR2FtZXNDb21wb25lbnQgPSBBbHBpbmVDb21wb25lbnQgJiB7XG4gIGFwaTogUHMuU3BvcnREYXRhLk5GTC5JbnN0YW5jZVxuICBvcGVuZWQ6IGJvb2xlYW5cbiAgc2VsZWN0ZWQ6IFBzLlNwb3J0RGF0YS5ORkwuR2FtZVNjb3JlIHwge31cbiAgaG9tZVRlYW06IFBzLlNwb3J0RGF0YS5ORkwuVGVhbSB8IHt9XG4gIGF3YXlUZWFtOiBQcy5TcG9ydERhdGEuTkZMLlRlYW0gfCB7fVxuICByZWFkb25seSBsb2FkaW5nOiBib29sZWFuXG4gIHJlYWRvbmx5ICBnYW1lczogUHMuU3BvcnREYXRhLk5GTC5HYW1lU2NvcmVbXVxuICByZWFkb25seSBoYXNOb0F2YWlsYWJsZUdhbWVzOiBib29sZWFuXG4gIHJlYWRvbmx5IGlzUmVhZHk6IGJvb2xlYW5cbiAgdGVhbShpZDogbnVtYmVyKTogUHMuU3BvcnREYXRhLk5GTC5UZWFtIHwge31cbiAgb3BlbihnYW1lOiBQcy5TcG9ydERhdGEuTkZMLkdhbWVTY29yZSk6IHZvaWRcbiAgY2xvc2UoKTogdm9pZFxufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAoY29uZmlnOiBORkxHYW1lQnlEYXRlQ29uZmlnKTogTkZMR2FtZXNDb21wb25lbnQge1xuICByZXR1cm4ge1xuICAgIGFwaTogY29uZmlnLm5mbCxcbiAgICBvcGVuZWQ6IGZhbHNlLFxuICAgIHNlbGVjdGVkOiB7fSxcbiAgICBob21lVGVhbToge30sXG4gICAgYXdheVRlYW06IHt9LFxuICAgIGFzeW5jIGluaXQoKSB7XG4gICAgICBpZiAoIXRoaXMubG9hZGluZyAmJiAhY29uZmlnLm5mbC5zZWFzb24pIHtcbiAgICAgICAgdGhpcy5hcGkuaW5pdGlhbGl6ZSgpXG4gICAgICB9XG4gICAgfSxcbiAgICBnZXQgY3VycmVudFdlZWsoKSB7XG4gICAgICByZXR1cm4gY29uZmlnLm5mbD8uY3VycmVudFdlZWsgPz8gMFxuICAgIH0sXG4gICAgZ2V0IHdlZWtzKCkge1xuICAgICAgcmV0dXJuIGNvbmZpZy5uZmwud2Vla3NcbiAgICB9LFxuICAgIGdldCBsb2FkaW5nKCkge1xuICAgICAgcmV0dXJuIGNvbmZpZy5uZmwubG9hZGluZ1xuICAgIH0sXG4gICAgZ2V0IGdhbWVzKCkge1xuICAgICAgcmV0dXJuIGNvbmZpZy5uZmwuZ2FtZXNcbiAgICB9LFxuICAgIGdldCBoYXNOb0F2YWlsYWJsZUdhbWVzKCkge1xuICAgICAgcmV0dXJuICF0aGlzLmxvYWRpbmcgJiYgdGhpcy5nYW1lcy5sZW5ndGggPCAxXG4gICAgfSxcbiAgICBnZXQgaXNSZWFkeSgpIHtcbiAgICAgIHJldHVybiAhdGhpcy5vcGVuZWQgJiYgIXRoaXMubG9hZGluZyAmJiB0aGlzLmdhbWVzLmxlbmd0aCA+IDBcbiAgICB9LFxuICAgIGdldCBzZWFzb25UaXRsZSgpIHtcbiAgICAgIGlmICghdGhpcy5zZWxlY3RlZCkge1xuICAgICAgICByZXR1cm4gJydcbiAgICAgIH1cbiAgICAgIGNvbnN0IHNlYXNvbiA9ICh0aGlzLnNlbGVjdGVkIGFzIFBzLlNwb3J0RGF0YS5ORkwuR2FtZVNjb3JlKS5TZWFzb24/LnRvU3RyaW5nKClcbiAgICAgIGlmIChzZWFzb24/LmVuZHNXaXRoKCdQUkUnKSkge1xuICAgICAgICByZXR1cm4gJ1ByZS1TZWFzb24nO1xuICAgICAgfVxuICAgICAgaWYgKHNlYXNvbj8uZW5kc1dpdGgoJ1BPU1QnKSkge1xuICAgICAgICByZXR1cm4gJ1Bvc3QtU2Vhc29uJ1xuICAgICAgfVxuICAgICAgcmV0dXJuICdSZWd1bGFyIFNlYXNvbic7XG4gICAgfSxcbiAgICBnZXQgc3RhZ2UoKSB7XG4gICAgICBpZiAoIXRoaXMuc2VsZWN0ZWQpIHtcbiAgICAgICAgcmV0dXJuICcnXG4gICAgICB9XG4gICAgICBjb25zdCBnYW1lOiBQcy5TcG9ydERhdGEuTkZMLkdhbWVTY29yZSA9IHRoaXMuc2VsZWN0ZWRcbiAgICAgIGlmIChnYW1lLlN0YXR1cyA9PT0gXCJTY2hlZHVsZWRcIikge1xuICAgICAgICByZXR1cm4gbmV3IEludGwuRGF0ZVRpbWVGb3JtYXQodW5kZWZpbmVkLCB7XG4gICAgICAgICAgaG91ckN5Y2xlOiAnaDEyJyxcbiAgICAgICAgICBob3VyOiBcIjItZGlnaXRcIixcbiAgICAgICAgICBtaW51dGU6IFwiMi1kaWdpdFwiXG4gICAgICAgIH0pLmZvcm1hdChuZXcgRGF0ZShnYW1lLkRhdGVUaW1lKSlcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGdhbWUuUXVhcnRlckRlc2NyaXB0aW9uID8/IGdhbWUuU3RhdHVzXG4gICAgfSxcbiAgICB0ZWFtKGlkKSB7XG4gICAgICByZXR1cm4gY29uZmlnLm5mbC50ZWFtcy5maW5kKHRlYW0gPT4gdGVhbS5UZWFtSUQgPT09IGlkKSA/PyB7fVxuICAgIH0sXG4gICAgb3BlbihnYW1lKSB7XG4gICAgICB0aGlzLnNlbGVjdGVkID0gZ2FtZVxuICAgICAgdGhpcy5ob21lVGVhbSA9IHRoaXMudGVhbShnYW1lLkhvbWVUZWFtSUQpXG4gICAgICB0aGlzLmF3YXlUZWFtID0gdGhpcy50ZWFtKGdhbWUuQXdheVRlYW1JRClcbiAgICAgIHRoaXMub3BlbmVkID0gdHJ1ZVxuICAgICAgcmV0dXJuIGdhbWVcbiAgICB9LFxuICAgIGNsb3NlKCkge1xuICAgICAgdGhpcy5zZWxlY3RlZCA9IHt9XG4gICAgICB0aGlzLmhvbWVUZWFtID0ge31cbiAgICAgIHRoaXMuYXdheVRlYW0gPSB7fVxuICAgICAgdGhpcy5vcGVuZWQgPSBmYWxzZVxuICAgIH0sXG4gIH1cbn0iLCJpbXBvcnQgQXBpIGZyb20gJy4uLy4uLy4uL2NvcmUvU3VwcG9ydC9Qc0FwaSdcbmltcG9ydCBOZmxJbnN0YW5jZSBmcm9tIFwiLi4vU2VydmljZXMvTmZsSW5zdGFuY2UudHNcIjtcbmltcG9ydCBORkxHYW1lc0J5RGF0ZSBmcm9tIFwiLi4vQ29tcG9uZW50cy9ORkxHYW1lc0J5RGF0ZS50c1wiO1xuaW1wb3J0IHtBbHBpbmV9IGZyb20gXCJhbHBpbmVqc1wiO1xuXG4vKipcbiAqIE5GTCBBcGkgY29ubmVjdG9yLlxuICogVGhpcyBzZXJ2aWNlIHByb3ZpZGVyIHByb3ZpZGVzIGFuIGFwaSB0byBpbnRlcmFjdCB3aXRoIE5GTCBhcGkgZnJvbSBTcG9ydERhdGEuXG4gKlxuICogQGF1dGhvciBEZWx2aSBNYXJ0ZSA8ZGVsdmlAcGFkc3F1YWQuY29tPlxuICogQHBhY2thZ2UgU3BvcnREYXRhXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNwb3J0RGF0YU5GTFByb3ZpZGVyIGltcGxlbWVudHMgUHMuUHJvdmlkZXIuSW50ZXJmYWNlIHtcbiAgLyoqXG4gICAqIE5ldHdvcmsgU2VydmljZVxuICAgKi9cbiAgcHJvdGVjdGVkIGFwaT86IFBzLlN1cHBvcnQuQXBpLkluc3RhbmNlO1xuXG4gIC8qKlxuICAgKiBDYWNoaW5nIHNlcnZpY2VcbiAgICovXG4gIHByb3RlY3RlZCBjYWNoZT86IFBzLlN1cHBvcnQuQ2FjaGUuSW5zdGFuY2U7XG4gIC8qKlxuICAgKiBORkwgU2VydmljZVxuICAgKiBAcHJvdGVjdGVkXG4gICAqL1xuICBwcm90ZWN0ZWQgc2VydmljZT86IFBzLlNwb3J0RGF0YS5ORkwuSW5zdGFuY2U7XG5cbiAgLyoqXG4gICAqIEFscGluZSBzZXJ2aWNlLlxuICAgKiBAcHJvdGVjdGVkXG4gICAqL1xuICBwcm90ZWN0ZWQgYWxwaW5lPzogQWxwaW5lXG5cbiAga2V5KCk6IHN0cmluZyB7XG4gICAgcmV0dXJuICdTcG9ydERhdGFORkwnXG4gIH1cblxuICBhc3luYyBib290KHtcbiAgICAgICAgICAgICAgIGRlYnVnLFxuICAgICAgICAgICAgICAgcGFyYW1ldGVyc1xuICAgICAgICAgICAgIH06IFBzLlByb3ZpZGVyLkNvbnRleHQ8UHMuSW5zdGFuY2UuU3BvcnREYXRhTkZMQ29uZmlnPikge1xuICAgIGlmICghdGhpcy5jYWNoZSkge1xuICAgICAgdGhyb3cgVHlwZUVycm9yKCdbUGFkU3F1YWRdOk5GTCAtIFNlcnZpY2UgW2NhY2hlXSBpcyByZXF1aXJlZC4nKVxuICAgIH1cbiAgICBpZiAoIXRoaXMuYXBpKSB7XG4gICAgICB0aHJvdyBUeXBlRXJyb3IoJ1tQYWRTcXVhZF06TkZMIC0gU2VydmljZSBbYXBpXSBpcyByZXF1aXJlZC4nKVxuICAgIH1cbiAgICBpZiAoIXRoaXMuc2VydmljZSkge1xuICAgICAgdGhyb3cgVHlwZUVycm9yKCdbUGFkU3F1YWRdOk5GTCAtIFNlcnZpY2UgW05GTF0gbXVzdCBiZSBpbnN0YW50aWF0ZWQuJylcbiAgICB9XG5cbiAgICBpZiAoZGVidWcpIHtcbiAgICAgIGNvbnNvbGUuZGVidWcoYFtQYWRTcXVhZF06JHt0aGlzLmtleSgpfSBTcG9ydCBkYXRhIEJPT1RFRC5gKVxuICAgIH1cbiAgICBpZiAocGFyYW1ldGVycz8uc3RhcnRPbkJvb3QpIHtcbiAgICAgIGF3YWl0IHRoaXMuc2VydmljZS5pbml0aWFsaXplKClcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5zZXJ2aWNlXG4gIH1cblxuICBwdWJsaWMgYXN5bmMgcmVnaXN0ZXIoY3R4OiBQcy5Qcm92aWRlci5Db250ZXh0PFBzLkluc3RhbmNlLlNwb3J0RGF0YU5GTENvbmZpZz4pIHtcbiAgICBpZiAoY3R4LmRlYnVnKSB7XG4gICAgICBjb25zb2xlLmRlYnVnKGBbUGFkU3F1YWRdOiR7dGhpcy5rZXkoKX0gU3BvcnQgZGF0YSBSRUdJU1RFUkVELmApXG4gICAgfVxuXG4gICAgdGhpcy5hcGkgPSBuZXcgQXBpKHtcbiAgICAgIGFwaVRva2VuOiBgJHtjdHgucGFyYW1ldGVycz8udG9rZW59YCxcbiAgICAgIGJhc2VVcmw6ICdodHRwczovL2FwaS5zcG9ydHNkYXRhLmlvL3YzL25mbC8nLFxuICAgICAgYXBpS2V5TmFtZTogJ2tleScsXG4gICAgICBhdXRob3JpemF0aW9uOiAna2V5JyxcbiAgICB9KVxuXG4gICAgdGhpcy5jYWNoZSA9IGN0eC5lbmdpbmUuZ2V0PFBzLlN1cHBvcnQuQ2FjaGUuSW5zdGFuY2U+KCdjYWNoZScpXG5cbiAgICB0aGlzLnNlcnZpY2UgPSBuZXcgTmZsSW5zdGFuY2Uoe1xuICAgICAga2V5OiBjdHgucGFyYW1ldGVycz8uZGF0ZSA/PyBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICBhcGk6IHRoaXMuYXBpLFxuICAgICAgZGVidWc6IGN0eC5kZWJ1ZyxcbiAgICAgIGNhY2hlOiB0aGlzLmNhY2hlIGFzIFBzLlN1cHBvcnQuQ2FjaGUuSW5zdGFuY2UsXG4gICAgICBmaWx0ZXJzOiB7XG4gICAgICAgIGRhdGU6IGN0eC5wYXJhbWV0ZXJzPy5kYXRlLFxuICAgICAgICBjaGFubmVsczogY3R4LnBhcmFtZXRlcnM/LmNoYW5uZWxzLFxuICAgICAgfVxuICAgIH0pXG5cbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdhbHBpbmU6aW5pdCcsICgpID0+IHtcbiAgICAgIHRoaXMuYWxwaW5lID0gY3R4LmVuZ2luZS5nZXQ8QWxwaW5lPignYWxwaW5lJylcbiAgICAgIHRoaXMucmVnaXN0ZXJDb21wb25lbnRzKGN0eClcbiAgICB9KVxuICB9XG5cblxuICBwcm90ZWN0ZWQgcmVnaXN0ZXJDb21wb25lbnRzKHtwYXJhbWV0ZXJzfTogUHMuUHJvdmlkZXIuQ29udGV4dCkge1xuXG4gICAgdGhpcy5hbHBpbmU/LmRhdGEoJ05GTEdhbWVzQnlEYXRlJywgKGluaXRpYWxTdGF0ZUFyZ3MpID0+XG4gICAgICAgIE5GTEdhbWVzQnlEYXRlKHtcbiAgICAgICAgICBuZmw6IHRoaXMuc2VydmljZSBhcyBQcy5TcG9ydERhdGEuTkZMLkluc3RhbmNlLFxuICAgICAgICAgIGRhdGU6IGluaXRpYWxTdGF0ZUFyZ3MgPz8gcGFyYW1ldGVycz8uZGF0ZSxcbiAgICAgICAgfSlcbiAgICApXG4gIH1cbn0iXSwibmFtZXMiOlsiUHNBcGkiLCJjb25maWciLCJfX3B1YmxpY0ZpZWxkIiwicGF0aCIsInBhcmFtcyIsInJlc3BvbnNlIiwicXVlcnkiLCJxdWVyeVN0cmluZyIsIk5mbEluc3RhbmNlIiwiYXBpIiwiY2FjaGUiLCJrZXkiLCJkZWJ1ZyIsImZpbHRlcnMiLCJBbHBpbmUiLCJnYW1lcyIsImxvY2FsR2FtZXMiLCJfIiwiaW5kZXgiLCJpIiwiZyIsIl9iIiwiX2EiLCJjYW5jZWwiLCJzdGF0ZSIsImRhdGEiLCJmYWlsZWQiLCJzZWFzb24iLCJtZXNzYWdlIiwiY29sbGVjdGlvbiIsIndpdGhvdXQiLCJjaGFubmVscyIsImdhbWUiLCJkYXRlIiwidGVhbXMiLCJ3ZWVrcyIsInN1bW1hcnkiLCJORkxHYW1lc0J5RGF0ZSIsImlkIiwidGVhbSIsIlNwb3J0RGF0YU5GTFByb3ZpZGVyIiwicGFyYW1ldGVycyIsImN0eCIsIkFwaSIsIl9jIiwiX2QiLCJpbml0aWFsU3RhdGVBcmdzIl0sIm1hcHBpbmdzIjoiOzs7O0FBSUEsTUFBcUJBLEVBQU07QUFBQSxFQUd6QixZQUFZQyxHQUErQjtBQUZuQyxJQUFBQyxFQUFBO0FBR04sU0FBSyxVQUFVRDtBQUFBLEVBQ2pCO0FBQUEsRUFFQSxNQUFhLElBQU9FLEdBQWNDLEdBQWlDO0FBQ2pFLFVBQU1DLElBQVcsTUFBTSxNQUFNLEtBQUssSUFBSUYsR0FBTUMsQ0FBTSxDQUFDO0FBRS9DLFdBQUNDLEVBQVMsS0FRcUI7QUFBQSxNQUNqQyxRQUFRO0FBQUEsTUFDUixTQUFTQSxFQUFTO0FBQUEsTUFDbEIsTUFBTyxNQUFNQSxFQUFTLEtBQVksS0FBQSxNQUFNQSxFQUFTLEtBQUs7QUFBQSxJQUFBLElBVnRCO0FBQUEsTUFDOUIsUUFBUTtBQUFBLE1BQ1IsU0FBU0EsRUFBUztBQUFBLE1BQ2xCLE1BQU0sQ0FBQztBQUFBLElBQUE7QUFBQSxFQVNiO0FBQUEsRUFFUSxJQUFJRixHQUFjQyxHQUFpQztBQUNuRCxVQUFBRSxJQUFRLElBQUksZ0JBQWdCRixDQUFNO0FBQ3BDLElBQUEsS0FBSyxRQUFRLGtCQUFrQixTQUNqQ0UsRUFBTSxJQUFJLEtBQUssUUFBUSxZQUFZLEtBQUssUUFBUSxRQUFRO0FBR3BELFVBQUFDLElBQWNELEVBQU07QUFDMUIsV0FBTyxJQUFJLElBQUksR0FBR0gsQ0FBSSxHQUFHSSxJQUFjLE1BQU1BLElBQWMsRUFBRSxJQUFJLEtBQUssUUFBUSxPQUFPO0FBQUEsRUFDdkY7QUFDRjtBQ2pCQSxNQUFxQkMs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
