var o = Object.defineProperty;
var l = (i, e, t) => e in i ? o(i, e, { enumerable: !0, configurable: !0, writable: !0, value: t }) : i[e] = t;
var n = (i, e, t) => (l(i, typeof e != "symbol" ? e + "" : e, t), t);
import c from "../../libs/lib-alpine.js";
class u {
  constructor(e) {
    n(this, "$config");
    this.$config = e;
  }
  async get(e, t) {
    const s = await fetch(this.url(e, t));
    return s.ok ? {
      failed: !1,
      message: s.statusText,
      data: await s.json() || await s.text()
    } : {
      failed: !0,
      message: s.statusText,
      data: {}
    };
  }
  url(e, t) {
    const s = new URLSearchParams(t);
    this.$config.authorization === "key" && s.set(this.$config.apiKeyName, this.$config.apiToken);
    const a = s.toString();
    return new URL(`${e}${a ? "?" + a : ""}`, this.$config.baseUrl);
  }
}
class d {
  constructor({ api: e, cache: t, key: s, debug: a, filters: r }) {
    n(this, "$api");
    n(this, "$cache");
    n(this, "$key");
    n(this, "$debugging");
    n(this, "$filters");
    n(this, "$state", c.reactive({
      season: "",
      loading: !1,
      weeks: 0,
      games: [],
      teams: []
    }));
    this.$api = e, this.$cache = t, this.$key = s, this.$debugging = a, this.$filters = r ?? {};
  }
  get weeks() {
    return this.$state.weeks;
  }
  get games() {
    const e = this.collectByFilters(this.$state.games);
    if (e.length < 1 && this.$state.games.length > 0) {
      const t = this.collectByFilters(this.$state.games, ["date"]);
      return Array(2).fill(void 0).map((s, a) => t[a] ? t[a] : s).filter((s) => s);
    }
    return e;
  }
  get channels() {
    return [...new Set(this.games.map((e) => e.Channel))];
  }
  get season() {
    return this.$state.season;
  }
  get teams() {
    return this.$state.teams;
  }
  get loading() {
    return this.$state.loading;
  }
  get currentWeek() {
    var e, t;
    return ((t = (e = this.games) == null ? void 0 : e.at(0)) == null ? void 0 : t.Week) ?? 0;
  }
  /**
   * Initialize the instance state.
   */
  async initialize() {
    return this.$state.loading = !0, this.$debugging ? this.$state = await this.initState() : this.$state = await this.$cache.get(`NFLInstance.sync.${this.$key}`, async ({ cancel: e }) => {
      const t = await this.initState();
      return t.teams.length < 1 || t.games.length < 1 || !t.season ? e(t) : t;
    }), this.$state.loading = !1, this;
  }
  async fetchSeasonCurrent() {
    const {
      data: e,
      failed: t
    } = await this.$api.get("scores/json/CurrentSeason");
    return t ? (/* @__PURE__ */ new Date()).getFullYear().toString() : e;
  }
  async fetchSeasonGames(e) {
    const {
      data: t,
      failed: s,
      message: a
    } = await this.$api.get(`scores/json/Scores/${e}`);
    if (s)
      throw TypeError(`NFLInstance.fetchSeasonGames: ${a}`);
    return t;
  }
  async fetchSeasonTeams(e) {
    const {
      data: t,
      failed: s,
      message: a
    } = await this.$api.get(`scores/json/Teams/${e}`);
    if (s)
      throw TypeError(`NFLInstance.fetchSeasonTeams: ${a}`);
    return t;
  }
  collectByFilters(e, t = []) {
    var s, a;
    return (s = this.$filters) != null && s.date && !t.includes("date") && (e = this.collectByFilterDate(e, this.$filters.date)), Array.isArray((a = this.$filters) == null ? void 0 : a.channels) && !t.includes("channels") && (e = this.collectByFilterChannels(e, this.$filters.channels)), e;
  }
  collectByFilterChannels(e, t) {
    return e.filter((s) => t.includes(s.Channel));
  }
  collectByFilterDate(e, t) {
    return e.filter((s) => s.Day.substring(0, 10) === t.substring(0, 10));
  }
  async initState() {
    const e = await this.fetchSeasonCurrent(), t = await this.fetchSeasonGames(e), s = await this.fetchSeasonTeams(e), a = t.reduce((r, h) => r < h.Week ? h.Week : r, 0);
    return {
      season: e,
      teams: s,
      games: t,
      weeks: a,
      loading: !1
    };
  }
}
function g(i) {
  return {
    api: i.nfl,
    opened: !1,
    selected: {},
    homeTeam: {},
    awayTeam: {},
    async init() {
      !this.loading && !i.nfl.season && this.api.initialize();
    },
    get currentWeek() {
      var e;
      return ((e = i.nfl) == null ? void 0 : e.currentWeek) ?? 0;
    },
    get weeks() {
      return i.nfl.weeks;
    },
    get loading() {
      return i.nfl.loading;
    },
    get games() {
      return i.nfl.games;
    },
    get hasNoAvailableGames() {
      return !this.loading && this.games.length < 1;
    },
    get isReady() {
      return !this.opened && !this.loading && this.games.length > 0;
    },
    get seasonTitle() {
      var t;
      if (!this.selected)
        return "";
      const e = (t = this.selected.Season) == null ? void 0 : t.toString();
      return e != null && e.endsWith("PRE") ? "Pre-Season" : e != null && e.endsWith("POST") ? "Post-Season" : "Regular Season";
    },
    get stage() {
      if (!this.selected)
        return "";
      const e = this.selected;
      return e.Status === "Scheduled" ? new Intl.DateTimeFormat(void 0, {
        hourCycle: "h12",
        hour: "2-digit",
        minute: "2-digit"
      }).format(new Date(e.DateTime)) : e.QuarterDescription ?? e.Status;
    },
    team(e) {
      return i.nfl.teams.find((t) => t.TeamID === e) ?? {};
    },
    open(e) {
      return this.selected = e, this.homeTeam = this.team(e.HomeTeamID), this.awayTeam = this.team(e.AwayTeamID), this.opened = !0, e;
    },
    close() {
      this.selected = {}, this.homeTeam = {}, this.awayTeam = {}, this.opened = !1;
    }
  };
}
class y {
  constructor() {
    /**
     * Network Service
     */
    n(this, "api");
    /**
     * Caching service
     */
    n(this, "cache");
    /**
     * NFL Service
     * @protected
     */
    n(this, "service");
    /**
     * Alpine service.
     * @protected
     */
    n(this, "alpine");
  }
  key() {
    return "SportDataNFL";
  }
  async boot({
    debug: e,
    parameters: t
  }) {
    if (!this.cache)
      throw TypeError("[PadSquad]:NFL - Service [cache] is required.");
    if (!this.api)
      throw TypeError("[PadSquad]:NFL - Service [api] is required.");
    if (!this.service)
      throw TypeError("[PadSquad]:NFL - Service [NFL] must be instantiated.");
    return e && console.debug(`[PadSquad]:${this.key()} Sport data BOOTED.`), t != null && t.startOnBoot && await this.service.initialize(), this.service;
  }
  async register(e) {
    var t, s, a, r;
    e.debug && console.debug(`[PadSquad]:${this.key()} Sport data REGISTERED.`), this.api = new u({
      apiToken: `${(t = e.parameters) == null ? void 0 : t.token}`,
      baseUrl: "https://api.sportsdata.io/v3/nfl/",
      apiKeyName: "key",
      authorization: "key"
    }), this.cache = e.engine.get("cache"), this.service = new d({
      key: ((s = e.parameters) == null ? void 0 : s.date) ?? (/* @__PURE__ */ new Date()).toISOString(),
      api: this.api,
      debug: e.debug,
      cache: this.cache,
      filters: {
        date: (a = e.parameters) == null ? void 0 : a.date,
        channels: (r = e.parameters) == null ? void 0 : r.channels
      }
    }), document.addEventListener("alpine:init", () => {
      this.alpine = e.engine.get("alpine"), this.registerComponents(e);
    });
  }
  registerComponents({ parameters: e }) {
    var t;
    (t = this.alpine) == null || t.data(
      "NFLGamesByDate",
      (s) => g({
        nfl: this.service,
        date: s ?? (e == null ? void 0 : e.date)
      })
    );
  }
}
export {
  y as default
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmZsLmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvY29yZS9TdXBwb3J0L1BzQXBpLnRzIiwiLi4vLi4vLi4vc3JjL3BhY2thZ2UvU3BvcnREYXRhL1NlcnZpY2VzL05mbEluc3RhbmNlLnRzIiwiLi4vLi4vLi4vc3JjL3BhY2thZ2UvU3BvcnREYXRhL0NvbXBvbmVudHMvTkZMR2FtZXNCeURhdGUudHMiLCIuLi8uLi8uLi9zcmMvcGFja2FnZS9TcG9ydERhdGEvUHJvdmlkZXJzL1Nwb3J0RGF0YU5GTFByb3ZpZGVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGF1dGhvciBEZWx2aSBNYXJ0ZSA8ZGVsdmkubWFydGVAZ21haWwuY29tPlxuICogQHBhY2thZ2UgUGFkc3F1YWQvU3VwcG9ydFxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQc0FwaSB7XG4gIHByaXZhdGUgJGNvbmZpZzogUHMuU3VwcG9ydC5BcGkuQ29uZmlnXG5cbiAgY29uc3RydWN0b3IoY29uZmlnOiBQcy5TdXBwb3J0LkFwaS5Db25maWcpIHtcbiAgICB0aGlzLiRjb25maWcgPSBjb25maWdcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBnZXQ8VD4ocGF0aDogc3RyaW5nLCBwYXJhbXM/OiB7IFtrZXk6IHN0cmluZ106IGFueSB9KSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh0aGlzLnVybChwYXRoLCBwYXJhbXMpKTtcblxuICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgIHJldHVybiA8UHMuU3VwcG9ydC5BcGkuUmVzcG9uc2U+e1xuICAgICAgICBmYWlsZWQ6IHRydWUsXG4gICAgICAgIG1lc3NhZ2U6IHJlc3BvbnNlLnN0YXR1c1RleHQsXG4gICAgICAgIGRhdGE6IHt9XG4gICAgICB9O1xuICAgIH1cblxuICAgIHJldHVybiA8UHMuU3VwcG9ydC5BcGkuUmVzcG9uc2U8VD4+e1xuICAgICAgZmFpbGVkOiBmYWxzZSxcbiAgICAgIG1lc3NhZ2U6IHJlc3BvbnNlLnN0YXR1c1RleHQsXG4gICAgICBkYXRhOiAoYXdhaXQgcmVzcG9uc2UuanNvbigpKSB8fCAoYXdhaXQgcmVzcG9uc2UudGV4dCgpKSxcbiAgICB9O1xuICB9XG5cbiAgcHJpdmF0ZSB1cmwocGF0aDogc3RyaW5nLCBwYXJhbXM/OiB7IFtrZXk6IHN0cmluZ106IGFueSB9KSB7XG4gICAgY29uc3QgcXVlcnkgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHBhcmFtcylcbiAgICBpZiAodGhpcy4kY29uZmlnLmF1dGhvcml6YXRpb24gPT09ICdrZXknKSB7XG4gICAgICBxdWVyeS5zZXQodGhpcy4kY29uZmlnLmFwaUtleU5hbWUsIHRoaXMuJGNvbmZpZy5hcGlUb2tlbilcbiAgICB9XG5cbiAgICBjb25zdCBxdWVyeVN0cmluZyA9IHF1ZXJ5LnRvU3RyaW5nKCk7XG4gICAgcmV0dXJuIG5ldyBVUkwoYCR7cGF0aH0ke3F1ZXJ5U3RyaW5nID8gJz8nICsgcXVlcnlTdHJpbmcgOiAnJ31gLCB0aGlzLiRjb25maWcuYmFzZVVybCk7XG4gIH1cbn1cblxuIiwiaW1wb3J0IEFscGluZSBmcm9tIFwiYWxwaW5lanNcIjtcbmltcG9ydCBDaGFubmVscyA9IFBzLlNwb3J0RGF0YS5DaGFubmVscztcblxudHlwZSBORkxJbnN0YW5jZUZpbHRlcnMgPSB7XG4gIGNoYW5uZWxzPzogKENoYW5uZWxzIHwgbnVsbClbXVxuICBkYXRlPzogc3RyaW5nXG59XG50eXBlIE5GTEluc3RhbmNlID0ge1xuICBrZXk6IHN0cmluZ1xuICBkZWJ1ZzogYm9vbGVhblxuICBhcGk6IFBzLlN1cHBvcnQuQXBpLkluc3RhbmNlLFxuICBjYWNoZTogUHMuU3VwcG9ydC5DYWNoZS5JbnN0YW5jZSxcbiAgZmlsdGVycz86IE5GTEluc3RhbmNlRmlsdGVyc1xufVxudHlwZSBORkxJbnN0YW5jZVN0YXRlID0ge1xuICBzZWFzb246IHN0cmluZ1xuICB3ZWVrczogbnVtYmVyXG4gIGdhbWVzOiBQcy5TcG9ydERhdGEuTkZMLkdhbWVTY29yZVtdXG4gIHRlYW1zOiBQcy5TcG9ydERhdGEuTkZMLlRlYW1bXVxuICBsb2FkaW5nOiBib29sZWFuXG59XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBOZmxJbnN0YW5jZSBpbXBsZW1lbnRzIFBzLlNwb3J0RGF0YS5ORkwuSW5zdGFuY2Uge1xuICBwcml2YXRlIHJlYWRvbmx5ICRhcGk6IFBzLlN1cHBvcnQuQXBpLkluc3RhbmNlO1xuICBwcml2YXRlIHJlYWRvbmx5ICRjYWNoZTogUHMuU3VwcG9ydC5DYWNoZS5JbnN0YW5jZTtcbiAgcHJpdmF0ZSByZWFkb25seSAka2V5OiBzdHJpbmc7XG4gIHByaXZhdGUgcmVhZG9ubHkgJGRlYnVnZ2luZzogYm9vbGVhbjtcbiAgcHJpdmF0ZSByZWFkb25seSAkZmlsdGVyczogTkZMSW5zdGFuY2VGaWx0ZXJzO1xuXG4gIHByaXZhdGUgJHN0YXRlOiBORkxJbnN0YW5jZVN0YXRlID0gQWxwaW5lLnJlYWN0aXZlKHtcbiAgICBzZWFzb246ICcnLFxuICAgIGxvYWRpbmc6IGZhbHNlLFxuICAgIHdlZWtzOiAwLFxuICAgIGdhbWVzOiBbXSxcbiAgICB0ZWFtczogW11cbiAgfSlcblxuICBjb25zdHJ1Y3Rvcih7YXBpLCBjYWNoZSwga2V5LCBkZWJ1ZywgZmlsdGVyc306IE5GTEluc3RhbmNlKSB7XG4gICAgdGhpcy4kYXBpID0gYXBpXG4gICAgdGhpcy4kY2FjaGUgPSBjYWNoZVxuICAgIHRoaXMuJGtleSA9IGtleVxuICAgIHRoaXMuJGRlYnVnZ2luZyA9IGRlYnVnXG4gICAgdGhpcy4kZmlsdGVycyA9IGZpbHRlcnMgPz8ge31cbiAgfVxuXG4gIGdldCB3ZWVrcygpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLiRzdGF0ZS53ZWVrc1xuICB9XG5cblxuICBnZXQgZ2FtZXMoKSB7XG4gICAgY29uc3QgZ2FtZXMgPSB0aGlzLmNvbGxlY3RCeUZpbHRlcnModGhpcy4kc3RhdGUuZ2FtZXMpXG4gICAgaWYoZ2FtZXMubGVuZ3RoIDwgMSAmJiB0aGlzLiRzdGF0ZS5nYW1lcy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBsb2NhbEdhbWVzID0gdGhpcy5jb2xsZWN0QnlGaWx0ZXJzKHRoaXMuJHN0YXRlLmdhbWVzLCBbJ2RhdGUnXSlcbiAgICAgIHJldHVybiBBcnJheSgyKVxuICAgICAgICAgIC5maWxsKHVuZGVmaW5lZClcbiAgICAgICAgICAubWFwKChfLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgaWYoIWxvY2FsR2FtZXNbaW5kZXhdKSB7XG4gICAgICAgICAgICAgIHJldHVybiBfXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbG9jYWxHYW1lc1tpbmRleF1cbiAgICAgICAgICB9KVxuICAgICAgICAgIC5maWx0ZXIoaSA9PiBpKVxuICAgIH1cbiAgICByZXR1cm4gZ2FtZXNcbiAgfVxuXG4gIGdldCBjaGFubmVscygpIHtcbiAgICByZXR1cm4gWy4uLm5ldyBTZXQodGhpcy5nYW1lcy5tYXAoZyA9PiBnLkNoYW5uZWwpKV1cbiAgfVxuXG4gIGdldCBzZWFzb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuJHN0YXRlLnNlYXNvblxuICB9O1xuXG4gIGdldCB0ZWFtcygpOiBQcy5TcG9ydERhdGEuTkZMLlRlYW1bXSB7XG4gICAgcmV0dXJuIHRoaXMuJHN0YXRlLnRlYW1zXG4gIH1cblxuICBnZXQgbG9hZGluZygpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy4kc3RhdGUubG9hZGluZ1xuICB9XG5cbiAgZ2V0IGN1cnJlbnRXZWVrKCkge1xuICAgIHJldHVybiB0aGlzLmdhbWVzPy5hdCgwKT8uV2VlayA/PyAwXG4gIH1cblxuICAvKipcbiAgICogSW5pdGlhbGl6ZSB0aGUgaW5zdGFuY2Ugc3RhdGUuXG4gICAqL1xuICBhc3luYyBpbml0aWFsaXplKCk6IFByb21pc2U8UHMuU3BvcnREYXRhLk5GTC5JbnN0YW5jZT4ge1xuICAgIHRoaXMuJHN0YXRlLmxvYWRpbmcgPSB0cnVlXG4gICAgaWYgKHRoaXMuJGRlYnVnZ2luZykge1xuICAgICAgdGhpcy4kc3RhdGUgPSBhd2FpdCB0aGlzLmluaXRTdGF0ZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLiRzdGF0ZSA9IGF3YWl0IHRoaXMuJGNhY2hlLmdldDxORkxJbnN0YW5jZVN0YXRlPihgTkZMSW5zdGFuY2Uuc3luYy4ke3RoaXMuJGtleX1gLCBhc3luYyAoe2NhbmNlbH0pID0+IHtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSBhd2FpdCB0aGlzLmluaXRTdGF0ZSgpXG4gICAgICAgIGlmIChzdGF0ZS50ZWFtcy5sZW5ndGggPCAxIHx8IHN0YXRlLmdhbWVzLmxlbmd0aCA8IDEgfHwgIXN0YXRlLnNlYXNvbikge1xuICAgICAgICAgIHJldHVybiBjYW5jZWwoc3RhdGUpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN0YXRlXG4gICAgICB9KVxuICAgIH1cbiAgICB0aGlzLiRzdGF0ZS5sb2FkaW5nID0gZmFsc2VcbiAgICByZXR1cm4gdGhpc1xuICB9XG5cbiAgYXN5bmMgZmV0Y2hTZWFzb25DdXJyZW50KCk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgY29uc3Qge1xuICAgICAgZGF0YSxcbiAgICAgIGZhaWxlZFxuICAgIH0gPSBhd2FpdCB0aGlzLiRhcGkuZ2V0PHN0cmluZz4oJ3Njb3Jlcy9qc29uL0N1cnJlbnRTZWFzb24nKTtcbiAgICBpZiAoZmFpbGVkKSB7XG4gICAgICByZXR1cm4gbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpLnRvU3RyaW5nKClcbiAgICB9XG4gICAgcmV0dXJuIGRhdGFcbiAgfVxuXG4gIGFzeW5jIGZldGNoU2Vhc29uR2FtZXMoc2Vhc29uOiBzdHJpbmcpOiBQcm9taXNlPFBzLlNwb3J0RGF0YS5ORkwuR2FtZVNjb3JlW10+IHtcbiAgICBjb25zdCB7XG4gICAgICBkYXRhLFxuICAgICAgZmFpbGVkLFxuICAgICAgbWVzc2FnZVxuICAgIH0gPSBhd2FpdCB0aGlzLiRhcGkuZ2V0PFBzLlNwb3J0RGF0YS5ORkwuR2FtZVNjb3JlW10+KGBzY29yZXMvanNvbi9TY29yZXMvJHtzZWFzb259YClcbiAgICBpZiAoZmFpbGVkKSB7XG4gICAgICB0aHJvdyBUeXBlRXJyb3IoYE5GTEluc3RhbmNlLmZldGNoU2Vhc29uR2FtZXM6ICR7bWVzc2FnZX1gKVxuICAgIH1cbiAgICByZXR1cm4gZGF0YVxuICB9XG5cbiAgYXN5bmMgZmV0Y2hTZWFzb25UZWFtcyhzZWFzb246IHN0cmluZyk6IFByb21pc2U8UHMuU3BvcnREYXRhLk5GTC5UZWFtW10+IHtcbiAgICBjb25zdCB7XG4gICAgICBkYXRhLFxuICAgICAgZmFpbGVkLFxuICAgICAgbWVzc2FnZVxuICAgIH0gPSBhd2FpdCB0aGlzLiRhcGkuZ2V0PFBzLlNwb3J0RGF0YS5ORkwuVGVhbVtdPihgc2NvcmVzL2pzb24vVGVhbXMvJHtzZWFzb259YClcbiAgICBpZiAoZmFpbGVkKSB7XG4gICAgICB0aHJvdyBUeXBlRXJyb3IoYE5GTEluc3RhbmNlLmZldGNoU2Vhc29uVGVhbXM6ICR7bWVzc2FnZX1gKVxuICAgIH1cbiAgICByZXR1cm4gZGF0YVxuICB9XG5cbiAgY29sbGVjdEJ5RmlsdGVycyhjb2xsZWN0aW9uOiBQcy5TcG9ydERhdGEuTkZMLkdhbWVTY29yZVtdLCB3aXRob3V0OiAoJ2RhdGUnfCdjaGFubmVscycpW10gPSBbXSk6IFBzLlNwb3J0RGF0YS5ORkwuR2FtZVNjb3JlW10ge1xuXG4gICAgaWYgKHRoaXMuJGZpbHRlcnM/LmRhdGUgJiYgIXdpdGhvdXQuaW5jbHVkZXMoJ2RhdGUnKSkge1xuICAgICAgY29sbGVjdGlvbiA9IHRoaXMuY29sbGVjdEJ5RmlsdGVyRGF0ZShjb2xsZWN0aW9uLCB0aGlzLiRmaWx0ZXJzLmRhdGUpXG4gICAgfVxuXG4gICAgaWYgKEFycmF5LmlzQXJyYXkodGhpcy4kZmlsdGVycz8uY2hhbm5lbHMpICYmICF3aXRob3V0LmluY2x1ZGVzKCdjaGFubmVscycpKSB7XG4gICAgICBjb2xsZWN0aW9uID0gdGhpcy5jb2xsZWN0QnlGaWx0ZXJDaGFubmVscyhjb2xsZWN0aW9uLCB0aGlzLiRmaWx0ZXJzLmNoYW5uZWxzKVxuICAgIH1cblxuICAgIHJldHVybiBjb2xsZWN0aW9uXG4gIH1cblxuICBjb2xsZWN0QnlGaWx0ZXJDaGFubmVscyhjb2xsZWN0aW9uOiBQcy5TcG9ydERhdGEuTkZMLkdhbWVTY29yZVtdLCBjaGFubmVsczogKFBzLlNwb3J0RGF0YS5DaGFubmVscyB8IG51bGwpW10pIHtcbiAgICByZXR1cm4gY29sbGVjdGlvbi5maWx0ZXIoZ2FtZSA9PiBjaGFubmVscy5pbmNsdWRlcyhnYW1lLkNoYW5uZWwpKVxuICB9XG5cbiAgY29sbGVjdEJ5RmlsdGVyRGF0ZShjb2xsZWN0aW9uOiBQcy5TcG9ydERhdGEuTkZMLkdhbWVTY29yZVtdLCBkYXRlOiBzdHJpbmcpOiBQcy5TcG9ydERhdGEuTkZMLkdhbWVTY29yZVtdIHtcbiAgICByZXR1cm4gY29sbGVjdGlvbi5maWx0ZXIoZ2FtZSA9PiBnYW1lLkRheS5zdWJzdHJpbmcoMCwgMTApID09PSBkYXRlLnN1YnN0cmluZygwLCAxMCkpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBpbml0U3RhdGUoKTogUHJvbWlzZTxORkxJbnN0YW5jZVN0YXRlPiB7XG4gICAgY29uc3Qgc2Vhc29uID0gYXdhaXQgdGhpcy5mZXRjaFNlYXNvbkN1cnJlbnQoKVxuICAgIGNvbnN0IGdhbWVzID0gYXdhaXQgdGhpcy5mZXRjaFNlYXNvbkdhbWVzKHNlYXNvbilcbiAgICBjb25zdCB0ZWFtcyA9IGF3YWl0IHRoaXMuZmV0Y2hTZWFzb25UZWFtcyhzZWFzb24pXG4gICAgY29uc3Qgd2Vla3MgPSBnYW1lcy5yZWR1Y2UoKHN1bW1hcnksIGdhbWUpID0+IHtcbiAgICAgIGlmIChzdW1tYXJ5IDwgZ2FtZS5XZWVrKSB7XG4gICAgICAgIHJldHVybiBnYW1lLldlZWtcbiAgICAgIH1cbiAgICAgIHJldHVybiBzdW1tYXJ5XG4gICAgfSwgMClcbiAgICByZXR1cm4ge1xuICAgICAgc2Vhc29uLFxuICAgICAgdGVhbXMsXG4gICAgICBnYW1lcyxcbiAgICAgIHdlZWtzLFxuICAgICAgbG9hZGluZzogZmFsc2VcbiAgICB9XG4gIH1cblxufSIsImltcG9ydCB7QWxwaW5lQ29tcG9uZW50fSBmcm9tIFwiYWxwaW5lanNcIjtcblxudHlwZSBORkxHYW1lQnlEYXRlQ29uZmlnID0ge1xuICBkYXRlOiBEYXRlXG4gIG5mbDogUHMuU3BvcnREYXRhLk5GTC5JbnN0YW5jZVxufVxuXG50eXBlIE5GTEdhbWVzQ29tcG9uZW50ID0gQWxwaW5lQ29tcG9uZW50ICYge1xuICBhcGk6IFBzLlNwb3J0RGF0YS5ORkwuSW5zdGFuY2VcbiAgb3BlbmVkOiBib29sZWFuXG4gIHNlbGVjdGVkOiBQcy5TcG9ydERhdGEuTkZMLkdhbWVTY29yZSB8IHt9XG4gIGhvbWVUZWFtOiBQcy5TcG9ydERhdGEuTkZMLlRlYW0gfCB7fVxuICBhd2F5VGVhbTogUHMuU3BvcnREYXRhLk5GTC5UZWFtIHwge31cbiAgcmVhZG9ubHkgbG9hZGluZzogYm9vbGVhblxuICByZWFkb25seSAgZ2FtZXM6IFBzLlNwb3J0RGF0YS5ORkwuR2FtZVNjb3JlW11cbiAgcmVhZG9ubHkgaGFzTm9BdmFpbGFibGVHYW1lczogYm9vbGVhblxuICByZWFkb25seSBpc1JlYWR5OiBib29sZWFuXG4gIHRlYW0oaWQ6IG51bWJlcik6IFBzLlNwb3J0RGF0YS5ORkwuVGVhbSB8IHt9XG4gIG9wZW4oZ2FtZTogUHMuU3BvcnREYXRhLk5GTC5HYW1lU2NvcmUpOiB2b2lkXG4gIGNsb3NlKCk6IHZvaWRcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gKGNvbmZpZzogTkZMR2FtZUJ5RGF0ZUNvbmZpZyk6IE5GTEdhbWVzQ29tcG9uZW50IHtcbiAgcmV0dXJuIHtcbiAgICBhcGk6IGNvbmZpZy5uZmwsXG4gICAgb3BlbmVkOiBmYWxzZSxcbiAgICBzZWxlY3RlZDoge30sXG4gICAgaG9tZVRlYW06IHt9LFxuICAgIGF3YXlUZWFtOiB7fSxcbiAgICBhc3luYyBpbml0KCkge1xuICAgICAgaWYgKCF0aGlzLmxvYWRpbmcgJiYgIWNvbmZpZy5uZmwuc2Vhc29uKSB7XG4gICAgICAgIHRoaXMuYXBpLmluaXRpYWxpemUoKVxuICAgICAgfVxuICAgIH0sXG4gICAgZ2V0IGN1cnJlbnRXZWVrKCkge1xuICAgICAgcmV0dXJuIGNvbmZpZy5uZmw/LmN1cnJlbnRXZWVrID8/IDBcbiAgICB9LFxuICAgIGdldCB3ZWVrcygpIHtcbiAgICAgIHJldHVybiBjb25maWcubmZsLndlZWtzXG4gICAgfSxcbiAgICBnZXQgbG9hZGluZygpIHtcbiAgICAgIHJldHVybiBjb25maWcubmZsLmxvYWRpbmdcbiAgICB9LFxuICAgIGdldCBnYW1lcygpIHtcbiAgICAgIHJldHVybiBjb25maWcubmZsLmdhbWVzXG4gICAgfSxcbiAgICBnZXQgaGFzTm9BdmFpbGFibGVHYW1lcygpIHtcbiAgICAgIHJldHVybiAhdGhpcy5sb2FkaW5nICYmIHRoaXMuZ2FtZXMubGVuZ3RoIDwgMVxuICAgIH0sXG4gICAgZ2V0IGlzUmVhZHkoKSB7XG4gICAgICByZXR1cm4gIXRoaXMub3BlbmVkICYmICF0aGlzLmxvYWRpbmcgJiYgdGhpcy5nYW1lcy5sZW5ndGggPiAwXG4gICAgfSxcbiAgICBnZXQgc2Vhc29uVGl0bGUoKSB7XG4gICAgICBpZiAoIXRoaXMuc2VsZWN0ZWQpIHtcbiAgICAgICAgcmV0dXJuICcnXG4gICAgICB9XG4gICAgICBjb25zdCBzZWFzb24gPSAodGhpcy5zZWxlY3RlZCBhcyBQcy5TcG9ydERhdGEuTkZMLkdhbWVTY29yZSkuU2Vhc29uPy50b1N0cmluZygpXG4gICAgICBpZiAoc2Vhc29uPy5lbmRzV2l0aCgnUFJFJykpIHtcbiAgICAgICAgcmV0dXJuICdQcmUtU2Vhc29uJztcbiAgICAgIH1cbiAgICAgIGlmIChzZWFzb24/LmVuZHNXaXRoKCdQT1NUJykpIHtcbiAgICAgICAgcmV0dXJuICdQb3N0LVNlYXNvbidcbiAgICAgIH1cbiAgICAgIHJldHVybiAnUmVndWxhciBTZWFzb24nO1xuICAgIH0sXG4gICAgZ2V0IHN0YWdlKCkge1xuICAgICAgaWYgKCF0aGlzLnNlbGVjdGVkKSB7XG4gICAgICAgIHJldHVybiAnJ1xuICAgICAgfVxuICAgICAgY29uc3QgZ2FtZTogUHMuU3BvcnREYXRhLk5GTC5HYW1lU2NvcmUgPSB0aGlzLnNlbGVjdGVkXG4gICAgICBpZiAoZ2FtZS5TdGF0dXMgPT09IFwiU2NoZWR1bGVkXCIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBJbnRsLkRhdGVUaW1lRm9ybWF0KHVuZGVmaW5lZCwge1xuICAgICAgICAgIGhvdXJDeWNsZTogJ2gxMicsXG4gICAgICAgICAgaG91cjogXCIyLWRpZ2l0XCIsXG4gICAgICAgICAgbWludXRlOiBcIjItZGlnaXRcIlxuICAgICAgICB9KS5mb3JtYXQobmV3IERhdGUoZ2FtZS5EYXRlVGltZSkpXG4gICAgICB9XG5cbiAgICAgIHJldHVybiBnYW1lLlF1YXJ0ZXJEZXNjcmlwdGlvbiA/PyBnYW1lLlN0YXR1c1xuICAgIH0sXG4gICAgdGVhbShpZCkge1xuICAgICAgcmV0dXJuIGNvbmZpZy5uZmwudGVhbXMuZmluZCh0ZWFtID0+IHRlYW0uVGVhbUlEID09PSBpZCkgPz8ge31cbiAgICB9LFxuICAgIG9wZW4oZ2FtZSkge1xuICAgICAgdGhpcy5zZWxlY3RlZCA9IGdhbWVcbiAgICAgIHRoaXMuaG9tZVRlYW0gPSB0aGlzLnRlYW0oZ2FtZS5Ib21lVGVhbUlEKVxuICAgICAgdGhpcy5hd2F5VGVhbSA9IHRoaXMudGVhbShnYW1lLkF3YXlUZWFtSUQpXG4gICAgICB0aGlzLm9wZW5lZCA9IHRydWVcbiAgICAgIHJldHVybiBnYW1lXG4gICAgfSxcbiAgICBjbG9zZSgpIHtcbiAgICAgIHRoaXMuc2VsZWN0ZWQgPSB7fVxuICAgICAgdGhpcy5ob21lVGVhbSA9IHt9XG4gICAgICB0aGlzLmF3YXlUZWFtID0ge31cbiAgICAgIHRoaXMub3BlbmVkID0gZmFsc2VcbiAgICB9LFxuICB9XG59IiwiaW1wb3J0IEFwaSBmcm9tICcuLi8uLi8uLi9jb3JlL1N1cHBvcnQvUHNBcGknXG5pbXBvcnQgTmZsSW5zdGFuY2UgZnJvbSBcIi4uL1NlcnZpY2VzL05mbEluc3RhbmNlLnRzXCI7XG5pbXBvcnQgTkZMR2FtZXNCeURhdGUgZnJvbSBcIi4uL0NvbXBvbmVudHMvTkZMR2FtZXNCeURhdGUudHNcIjtcbmltcG9ydCB7QWxwaW5lfSBmcm9tIFwiYWxwaW5lanNcIjtcblxuLyoqXG4gKiBORkwgQXBpIGNvbm5lY3Rvci5cbiAqIFRoaXMgc2VydmljZSBwcm92aWRlciBwcm92aWRlcyBhbiBhcGkgdG8gaW50ZXJhY3Qgd2l0aCBORkwgYXBpIGZyb20gU3BvcnREYXRhLlxuICpcbiAqIEBhdXRob3IgRGVsdmkgTWFydGUgPGRlbHZpQHBhZHNxdWFkLmNvbT5cbiAqIEBwYWNrYWdlIFNwb3J0RGF0YVxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTcG9ydERhdGFORkxQcm92aWRlciBpbXBsZW1lbnRzIFBzLlByb3ZpZGVyLkludGVyZmFjZSB7XG4gIC8qKlxuICAgKiBOZXR3b3JrIFNlcnZpY2VcbiAgICovXG4gIHByb3RlY3RlZCBhcGk/OiBQcy5TdXBwb3J0LkFwaS5JbnN0YW5jZTtcblxuICAvKipcbiAgICogQ2FjaGluZyBzZXJ2aWNlXG4gICAqL1xuICBwcm90ZWN0ZWQgY2FjaGU/OiBQcy5TdXBwb3J0LkNhY2hlLkluc3RhbmNlO1xuICAvKipcbiAgICogTkZMIFNlcnZpY2VcbiAgICogQHByb3RlY3RlZFxuICAgKi9cbiAgcHJvdGVjdGVkIHNlcnZpY2U/OiBQcy5TcG9ydERhdGEuTkZMLkluc3RhbmNlO1xuXG4gIC8qKlxuICAgKiBBbHBpbmUgc2VydmljZS5cbiAgICogQHByb3RlY3RlZFxuICAgKi9cbiAgcHJvdGVjdGVkIGFscGluZT86IEFscGluZVxuXG4gIGtleSgpOiBzdHJpbmcge1xuICAgIHJldHVybiAnU3BvcnREYXRhTkZMJ1xuICB9XG5cbiAgYXN5bmMgYm9vdCh7XG4gICAgICAgICAgICAgICBkZWJ1ZyxcbiAgICAgICAgICAgICAgIHBhcmFtZXRlcnNcbiAgICAgICAgICAgICB9OiBQcy5Qcm92aWRlci5Db250ZXh0PFBzLkluc3RhbmNlLlNwb3J0RGF0YU5GTENvbmZpZz4pIHtcbiAgICBpZiAoIXRoaXMuY2FjaGUpIHtcbiAgICAgIHRocm93IFR5cGVFcnJvcignW1BhZFNxdWFkXTpORkwgLSBTZXJ2aWNlIFtjYWNoZV0gaXMgcmVxdWlyZWQuJylcbiAgICB9XG4gICAgaWYgKCF0aGlzLmFwaSkge1xuICAgICAgdGhyb3cgVHlwZUVycm9yKCdbUGFkU3F1YWRdOk5GTCAtIFNlcnZpY2UgW2FwaV0gaXMgcmVxdWlyZWQuJylcbiAgICB9XG4gICAgaWYgKCF0aGlzLnNlcnZpY2UpIHtcbiAgICAgIHRocm93IFR5cGVFcnJvcignW1BhZFNxdWFkXTpORkwgLSBTZXJ2aWNlIFtORkxdIG11c3QgYmUgaW5zdGFudGlhdGVkLicpXG4gICAgfVxuXG4gICAgaWYgKGRlYnVnKSB7XG4gICAgICBjb25zb2xlLmRlYnVnKGBbUGFkU3F1YWRdOiR7dGhpcy5rZXkoKX0gU3BvcnQgZGF0YSBCT09URUQuYClcbiAgICB9XG4gICAgaWYgKHBhcmFtZXRlcnM/LnN0YXJ0T25Cb290KSB7XG4gICAgICBhd2FpdCB0aGlzLnNlcnZpY2UuaW5pdGlhbGl6ZSgpXG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuc2VydmljZVxuICB9XG5cbiAgcHVibGljIGFzeW5jIHJlZ2lzdGVyKGN0eDogUHMuUHJvdmlkZXIuQ29udGV4dDxQcy5JbnN0YW5jZS5TcG9ydERhdGFORkxDb25maWc+KSB7XG4gICAgaWYgKGN0eC5kZWJ1Zykge1xuICAgICAgY29uc29sZS5kZWJ1ZyhgW1BhZFNxdWFkXToke3RoaXMua2V5KCl9IFNwb3J0IGRhdGEgUkVHSVNURVJFRC5gKVxuICAgIH1cblxuICAgIHRoaXMuYXBpID0gbmV3IEFwaSh7XG4gICAgICBhcGlUb2tlbjogYCR7Y3R4LnBhcmFtZXRlcnM/LnRva2VufWAsXG4gICAgICBiYXNlVXJsOiAnaHR0cHM6Ly9hcGkuc3BvcnRzZGF0YS5pby92My9uZmwvJyxcbiAgICAgIGFwaUtleU5hbWU6ICdrZXknLFxuICAgICAgYXV0aG9yaXphdGlvbjogJ2tleScsXG4gICAgfSlcblxuICAgIHRoaXMuY2FjaGUgPSBjdHguZW5naW5lLmdldDxQcy5TdXBwb3J0LkNhY2hlLkluc3RhbmNlPignY2FjaGUnKVxuXG4gICAgdGhpcy5zZXJ2aWNlID0gbmV3IE5mbEluc3RhbmNlKHtcbiAgICAgIGtleTogY3R4LnBhcmFtZXRlcnM/LmRhdGUgPz8gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgYXBpOiB0aGlzLmFwaSxcbiAgICAgIGRlYnVnOiBjdHguZGVidWcsXG4gICAgICBjYWNoZTogdGhpcy5jYWNoZSBhcyBQcy5TdXBwb3J0LkNhY2hlLkluc3RhbmNlLFxuICAgICAgZmlsdGVyczoge1xuICAgICAgICBkYXRlOiBjdHgucGFyYW1ldGVycz8uZGF0ZSxcbiAgICAgICAgY2hhbm5lbHM6IGN0eC5wYXJhbWV0ZXJzPy5jaGFubmVscyxcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignYWxwaW5lOmluaXQnLCAoKSA9PiB7XG4gICAgICB0aGlzLmFscGluZSA9IGN0eC5lbmdpbmUuZ2V0PEFscGluZT4oJ2FscGluZScpXG4gICAgICB0aGlzLnJlZ2lzdGVyQ29tcG9uZW50cyhjdHgpXG4gICAgfSlcbiAgfVxuXG5cbiAgcHJvdGVjdGVkIHJlZ2lzdGVyQ29tcG9uZW50cyh7cGFyYW1ldGVyc306IFBzLlByb3ZpZGVyLkNvbnRleHQpIHtcblxuICAgIHRoaXMuYWxwaW5lPy5kYXRhKCdORkxHYW1lc0J5RGF0ZScsIChpbml0aWFsU3RhdGVBcmdzKSA9PlxuICAgICAgICBORkxHYW1lc0J5RGF0ZSh7XG4gICAgICAgICAgbmZsOiB0aGlzLnNlcnZpY2UgYXMgUHMuU3BvcnREYXRhLk5GTC5JbnN0YW5jZSxcbiAgICAgICAgICBkYXRlOiBpbml0aWFsU3RhdGVBcmdzID8/IHBhcmFtZXRlcnM/LmRhdGUsXG4gICAgICAgIH0pXG4gICAgKVxuICB9XG59Il0sIm5hbWVzIjpbIlBzQXBpIiwiY29uZmlnIiwiX19wdWJsaWNGaWVsZCIsInBhdGgiLCJwYXJhbXMiLCJyZXNwb25zZSIsInF1ZXJ5IiwicXVlcnlTdHJpbmciLCJOZmxJbnN0YW5jZSIsImFwaSIsImNhY2hlIiwia2V5IiwiZGVidWciLCJmaWx0ZXJzIiwiQWxwaW5lIiwiZ2FtZXMiLCJsb2NhbEdhbWVzIiwiXyIsImluZGV4IiwiaSIsImciLCJfYiIsIl9hIiwiY2FuY2VsIiwic3RhdGUiLCJkYXRhIiwiZmFpbGVkIiwic2Vhc29uIiwibWVzc2FnZSIsImNvbGxlY3Rpb24iLCJ3aXRob3V0IiwiY2hhbm5lbHMiLCJnYW1lIiwiZGF0ZSIsInRlYW1zIiwid2Vla3MiLCJzdW1tYXJ5IiwiTkZMR2FtZXNCeURhdGUiLCJpZCIsInRlYW0iLCJTcG9ydERhdGFORkxQcm92aWRlciIsInBhcmFtZXRlcnMiLCJjdHgiLCJBcGkiLCJfYyIsIl9kIiwiaW5pdGlhbFN0YXRlQXJncyJdLCJtYXBwaW5ncyI6Ijs7OztBQUlBLE1BQXFCQSxFQUFNO0FBQUEsRUFHekIsWUFBWUMsR0FBK0I7QUFGbkMsSUFBQUMsRUFBQTtBQUdOLFNBQUssVUFBVUQ7QUFBQSxFQUNqQjtBQUFBLEVBRUEsTUFBYSxJQUFPRSxHQUFjQyxHQUFpQztBQUNqRSxVQUFNQyxJQUFXLE1BQU0sTUFBTSxLQUFLLElBQUlGLEdBQU1DLENBQU0sQ0FBQztBQUUvQyxXQUFDQyxFQUFTLEtBUXFCO0FBQUEsTUFDakMsUUFBUTtBQUFBLE1BQ1IsU0FBU0EsRUFBUztBQUFBLE1BQ2xCLE1BQU8sTUFBTUEsRUFBUyxLQUFZLEtBQUEsTUFBTUEsRUFBUyxLQUFLO0FBQUEsSUFBQSxJQVZ0QjtBQUFBLE1BQzlCLFFBQVE7QUFBQSxNQUNSLFNBQVNBLEVBQVM7QUFBQSxNQUNsQixNQUFNLENBQUM7QUFBQSxJQUFBO0FBQUEsRUFTYjtBQUFBLEVBRVEsSUFBSUYsR0FBY0MsR0FBaUM7QUFD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
