var l = Object.defineProperty;
var o = (i, e, t) => e in i ? l(i, e, { enumerable: !0, configurable: !0, writable: !0, value: t }) : i[e] = t;
var n = (i, e, t) => (o(i, typeof e != "symbol" ? e + "" : e, t), t);
import c from "../../libs/lib-alpine.js";
class u {
  constructor(e) {
    n(this, "$config");
    this.$config = e;
  }
  async get(e, t) {
    const s = await fetch(this.url(e, t));
    return s.ok ? {
      failed: !1,
      message: s.statusText,
      data: await s.json() || await s.text()
    } : {
      failed: !0,
      message: s.statusText,
      data: {}
    };
  }
  url(e, t) {
    const s = new URLSearchParams(t);
    this.$config.authorization === "key" && s.set(this.$config.apiKeyName, this.$config.apiToken);
    const a = s.toString();
    return new URL(`${e}${a ? "?" + a : ""}`, this.$config.baseUrl);
  }
}
class d {
  constructor({ api: e, cache: t, key: s, debug: a, filters: r }) {
    n(this, "$api");
    n(this, "$cache");
    n(this, "$key");
    n(this, "$debugging");
    n(this, "$filters");
    n(this, "$state", c.reactive({
      season: "",
      loading: !1,
      weeks: 0,
      games: [],
      teams: []
    }));
    this.$api = e, this.$cache = t, this.$key = s, this.$debugging = a, this.$filters = r ?? {};
  }
  get weeks() {
    return this.$state.weeks;
  }
  get games() {
    const e = this.collectByFilters(this.$state.games);
    if (e.length < 1 && this.$state.games.length > 0) {
      const t = this.collectByFilters(this.$state.games, ["date"]);
      return Array(2).fill(void 0).map((s, a) => t[a] ? t[a] : s).filter((s) => s);
    }
    return e;
  }
  get channels() {
    return [...new Set(this.games.map((e) => e.Channel))];
  }
  get season() {
    return this.$state.season;
  }
  get teams() {
    return this.$state.teams;
  }
  get loading() {
    return this.$state.loading;
  }
  get currentWeek() {
    var e, t;
    return ((t = (e = this.games) == null ? void 0 : e.at(0)) == null ? void 0 : t.Week) ?? 0;
  }
  /**
   * Initialize the instance state.
   */
  async initialize() {
    return document.dispatchEvent(new CustomEvent("nfl:loading", {
      bubbles: !0,
      cancelable: !0,
      detail: { loading: !0 }
    })), this.$state.loading = !0, this.$debugging ? this.$state = await this.initState() : this.$state = await this.$cache.get(
      `NFLInstance.sync.${this.$key}`,
      async ({ cancel: e }) => {
        const t = await this.initState();
        return t.teams.length < 1 || t.games.length < 1 || !t.season ? e(t) : t;
      }
    ), this.$state.loading = !1, document.dispatchEvent(new CustomEvent("nfl:loading", {
      bubbles: !0,
      cancelable: !0,
      detail: { loading: !1 }
    })), this;
  }
  async fetchSeasonCurrent() {
    const { data: e, failed: t } = await this.$api.get(
      "scores/json/CurrentSeason"
    );
    return t ? (/* @__PURE__ */ new Date()).getFullYear().toString() : e;
  }
  async fetchSeasonGames(e) {
    const { data: t, failed: s, message: a } = await this.$api.get(`scores/json/Scores/${e}`);
    if (s)
      throw TypeError(`NFLInstance.fetchSeasonGames: ${a}`);
    return t;
  }
  async fetchSeasonTeams(e) {
    const { data: t, failed: s, message: a } = await this.$api.get(`scores/json/Teams/${e}`);
    if (s)
      throw TypeError(`NFLInstance.fetchSeasonTeams: ${a}`);
    return t;
  }
  collectByFilters(e, t = []) {
    var s, a;
    return (s = this.$filters) != null && s.date && !t.includes("date") && (e = this.collectByFilterDate(e, this.$filters.date)), Array.isArray((a = this.$filters) == null ? void 0 : a.channels) && !t.includes("channels") && (e = this.collectByFilterChannels(
      e,
      this.$filters.channels
    )), e;
  }
  collectByFilterChannels(e, t) {
    return e.filter((s) => t.includes(s.Channel));
  }
  collectByFilterDate(e, t) {
    return e.filter(
      (s) => s.Day.substring(0, 10) === t.substring(0, 10)
    );
  }
  async initState() {
    const e = await this.fetchSeasonCurrent(), t = await this.fetchSeasonGames(e), s = await this.fetchSeasonTeams(e), a = t.reduce((r, h) => r < h.Week ? h.Week : r, 0);
    return {
      season: e,
      teams: s,
      games: t,
      weeks: a,
      loading: !1
    };
  }
}
function g(i) {
  return {
    api: i.nfl,
    opened: !1,
    selected: {},
    homeTeam: {},
    awayTeam: {},
    async init() {
      !this.loading && !i.nfl.season && this.api.initialize();
    },
    get currentWeek() {
      var e;
      return ((e = i.nfl) == null ? void 0 : e.currentWeek) ?? 0;
    },
    get weeks() {
      return i.nfl.weeks;
    },
    get loading() {
      return i.nfl.loading;
    },
    get games() {
      return i.nfl.games;
    },
    get hasNoAvailableGames() {
      return !this.loading && this.games.length < 1;
    },
    get isReady() {
      return !this.opened && !this.loading && this.games.length > 0;
    },
    get seasonTitle() {
      var t;
      if (!this.selected)
        return "";
      const e = (t = this.selected.Season) == null ? void 0 : t.toString();
      return e != null && e.endsWith("PRE") ? "Pre-Season" : e != null && e.endsWith("POST") ? "Post-Season" : "Regular Season";
    },
    get stage() {
      if (!this.selected)
        return "";
      const e = this.selected;
      return e.Status === "Scheduled" ? new Intl.DateTimeFormat(void 0, {
        hourCycle: "h12",
        hour: "2-digit",
        minute: "2-digit"
      }).format(new Date(e.DateTime)) : e.QuarterDescription ?? e.Status;
    },
    team(e) {
      return i.nfl.teams.find((t) => t.TeamID === e) ?? {};
    },
    open(e) {
      return this.selected = e, this.homeTeam = this.team(e.HomeTeamID), this.awayTeam = this.team(e.AwayTeamID), this.opened = !0, e;
    },
    close() {
      this.selected = {}, this.homeTeam = {}, this.awayTeam = {}, this.opened = !1;
    }
  };
}
class y {
  constructor() {
    /**
     * Network Service
     */
    n(this, "api");
    /**
     * Caching service
     */
    n(this, "cache");
    /**
     * NFL Service
     * @protected
     */
    n(this, "service");
    /**
     * Alpine service.
     * @protected
     */
    n(this, "alpine");
  }
  key() {
    return "SportDataNFL";
  }
  async boot({
    debug: e,
    parameters: t
  }) {
    if (!this.cache)
      throw TypeError("[PadSquad]:NFL - Service [cache] is required.");
    if (!this.api)
      throw TypeError("[PadSquad]:NFL - Service [api] is required.");
    if (!this.service)
      throw TypeError("[PadSquad]:NFL - Service [NFL] must be instantiated.");
    return e && console.debug(`[PadSquad]:${this.key()} Sport data BOOTED.`), t != null && t.startOnBoot && await this.service.initialize(), this.service;
  }
  async register(e) {
    var t, s, a, r;
    e.debug && console.debug(`[PadSquad]:${this.key()} Sport data REGISTERED.`), this.api = new u({
      apiToken: `${(t = e.parameters) == null ? void 0 : t.token}`,
      baseUrl: "https://api.sportsdata.io/v3/nfl/",
      apiKeyName: "key",
      authorization: "key"
    }), this.cache = e.engine.get("cache"), this.service = new d({
      key: ((s = e.parameters) == null ? void 0 : s.date) ?? (/* @__PURE__ */ new Date()).toISOString(),
      api: this.api,
      debug: e.debug,
      cache: this.cache,
      filters: {
        date: (a = e.parameters) == null ? void 0 : a.date,
        channels: (r = e.parameters) == null ? void 0 : r.channels
      }
    }), document.addEventListener("alpine:init", () => {
      this.alpine = e.engine.get("alpine"), this.registerComponents(e);
    });
  }
  registerComponents({ parameters: e }) {
    var t;
    (t = this.alpine) == null || t.data(
      "NFLGamesByDate",
      (s) => g({
        nfl: this.service,
        date: s ?? (e == null ? void 0 : e.date)
      })
    );
  }
}
export {
  y as default
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmZsLmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvY29yZS9TdXBwb3J0L1BzQXBpLnRzIiwiLi4vLi4vLi4vc3JjL3BhY2thZ2UvU3BvcnREYXRhL1NlcnZpY2VzL05mbEluc3RhbmNlLnRzIiwiLi4vLi4vLi4vc3JjL3BhY2thZ2UvU3BvcnREYXRhL0NvbXBvbmVudHMvTkZMR2FtZXNCeURhdGUudHMiLCIuLi8uLi8uLi9zcmMvcGFja2FnZS9TcG9ydERhdGEvUHJvdmlkZXJzL1Nwb3J0RGF0YU5GTFByb3ZpZGVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGF1dGhvciBEZWx2aSBNYXJ0ZSA8ZGVsdmkubWFydGVAZ21haWwuY29tPlxuICogQHBhY2thZ2UgUGFkc3F1YWQvU3VwcG9ydFxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQc0FwaSB7XG4gIHByaXZhdGUgJGNvbmZpZzogUHMuU3VwcG9ydC5BcGkuQ29uZmlnXG5cbiAgY29uc3RydWN0b3IoY29uZmlnOiBQcy5TdXBwb3J0LkFwaS5Db25maWcpIHtcbiAgICB0aGlzLiRjb25maWcgPSBjb25maWdcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBnZXQ8VD4ocGF0aDogc3RyaW5nLCBwYXJhbXM/OiB7IFtrZXk6IHN0cmluZ106IGFueSB9KSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh0aGlzLnVybChwYXRoLCBwYXJhbXMpKTtcblxuICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgIHJldHVybiA8UHMuU3VwcG9ydC5BcGkuUmVzcG9uc2U+e1xuICAgICAgICBmYWlsZWQ6IHRydWUsXG4gICAgICAgIG1lc3NhZ2U6IHJlc3BvbnNlLnN0YXR1c1RleHQsXG4gICAgICAgIGRhdGE6IHt9XG4gICAgICB9O1xuICAgIH1cblxuICAgIHJldHVybiA8UHMuU3VwcG9ydC5BcGkuUmVzcG9uc2U8VD4+e1xuICAgICAgZmFpbGVkOiBmYWxzZSxcbiAgICAgIG1lc3NhZ2U6IHJlc3BvbnNlLnN0YXR1c1RleHQsXG4gICAgICBkYXRhOiAoYXdhaXQgcmVzcG9uc2UuanNvbigpKSB8fCAoYXdhaXQgcmVzcG9uc2UudGV4dCgpKSxcbiAgICB9O1xuICB9XG5cbiAgcHJpdmF0ZSB1cmwocGF0aDogc3RyaW5nLCBwYXJhbXM/OiB7IFtrZXk6IHN0cmluZ106IGFueSB9KSB7XG4gICAgY29uc3QgcXVlcnkgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHBhcmFtcylcbiAgICBpZiAodGhpcy4kY29uZmlnLmF1dGhvcml6YXRpb24gPT09ICdrZXknKSB7XG4gICAgICBxdWVyeS5zZXQodGhpcy4kY29uZmlnLmFwaUtleU5hbWUsIHRoaXMuJGNvbmZpZy5hcGlUb2tlbilcbiAgICB9XG5cbiAgICBjb25zdCBxdWVyeVN0cmluZyA9IHF1ZXJ5LnRvU3RyaW5nKCk7XG4gICAgcmV0dXJuIG5ldyBVUkwoYCR7cGF0aH0ke3F1ZXJ5U3RyaW5nID8gJz8nICsgcXVlcnlTdHJpbmcgOiAnJ31gLCB0aGlzLiRjb25maWcuYmFzZVVybCk7XG4gIH1cbn1cblxuIiwiaW1wb3J0IEFscGluZSBmcm9tIFwiYWxwaW5lanNcIjtcbmltcG9ydCBDaGFubmVscyA9IFBzLlNwb3J0RGF0YS5DaGFubmVscztcblxudHlwZSBORkxJbnN0YW5jZUZpbHRlcnMgPSB7XG4gIGNoYW5uZWxzPzogKENoYW5uZWxzIHwgbnVsbClbXTtcbiAgZGF0ZT86IHN0cmluZztcbn07XG50eXBlIE5GTEluc3RhbmNlID0ge1xuICBrZXk6IHN0cmluZztcbiAgZGVidWc6IGJvb2xlYW47XG4gIGFwaTogUHMuU3VwcG9ydC5BcGkuSW5zdGFuY2U7XG4gIGNhY2hlOiBQcy5TdXBwb3J0LkNhY2hlLkluc3RhbmNlO1xuICBmaWx0ZXJzPzogTkZMSW5zdGFuY2VGaWx0ZXJzO1xufTtcbnR5cGUgTkZMSW5zdGFuY2VTdGF0ZSA9IHtcbiAgc2Vhc29uOiBzdHJpbmc7XG4gIHdlZWtzOiBudW1iZXI7XG4gIGdhbWVzOiBQcy5TcG9ydERhdGEuTkZMLkdhbWVTY29yZVtdO1xuICB0ZWFtczogUHMuU3BvcnREYXRhLk5GTC5UZWFtW107XG4gIGxvYWRpbmc6IGJvb2xlYW47XG59O1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTmZsSW5zdGFuY2UgaW1wbGVtZW50cyBQcy5TcG9ydERhdGEuTkZMLkluc3RhbmNlIHtcbiAgcHJpdmF0ZSByZWFkb25seSAkYXBpOiBQcy5TdXBwb3J0LkFwaS5JbnN0YW5jZTtcbiAgcHJpdmF0ZSByZWFkb25seSAkY2FjaGU6IFBzLlN1cHBvcnQuQ2FjaGUuSW5zdGFuY2U7XG4gIHByaXZhdGUgcmVhZG9ubHkgJGtleTogc3RyaW5nO1xuICBwcml2YXRlIHJlYWRvbmx5ICRkZWJ1Z2dpbmc6IGJvb2xlYW47XG4gIHByaXZhdGUgcmVhZG9ubHkgJGZpbHRlcnM6IE5GTEluc3RhbmNlRmlsdGVycztcblxuICBwcml2YXRlICRzdGF0ZTogTkZMSW5zdGFuY2VTdGF0ZSA9IEFscGluZS5yZWFjdGl2ZSh7XG4gICAgc2Vhc29uOiBcIlwiLFxuICAgIGxvYWRpbmc6IGZhbHNlLFxuICAgIHdlZWtzOiAwLFxuICAgIGdhbWVzOiBbXSxcbiAgICB0ZWFtczogW10sXG4gIH0pO1xuXG4gIGNvbnN0cnVjdG9yKHsgYXBpLCBjYWNoZSwga2V5LCBkZWJ1ZywgZmlsdGVycyB9OiBORkxJbnN0YW5jZSkge1xuICAgIHRoaXMuJGFwaSA9IGFwaTtcbiAgICB0aGlzLiRjYWNoZSA9IGNhY2hlO1xuICAgIHRoaXMuJGtleSA9IGtleTtcbiAgICB0aGlzLiRkZWJ1Z2dpbmcgPSBkZWJ1ZztcbiAgICB0aGlzLiRmaWx0ZXJzID0gZmlsdGVycyA/PyB7fTtcbiAgfVxuXG4gIGdldCB3ZWVrcygpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLiRzdGF0ZS53ZWVrcztcbiAgfVxuXG4gIGdldCBnYW1lcygpIHtcbiAgICBjb25zdCBnYW1lcyA9IHRoaXMuY29sbGVjdEJ5RmlsdGVycyh0aGlzLiRzdGF0ZS5nYW1lcyk7XG4gICAgaWYgKGdhbWVzLmxlbmd0aCA8IDEgJiYgdGhpcy4kc3RhdGUuZ2FtZXMubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgbG9jYWxHYW1lcyA9IHRoaXMuY29sbGVjdEJ5RmlsdGVycyh0aGlzLiRzdGF0ZS5nYW1lcywgW1wiZGF0ZVwiXSk7XG4gICAgICByZXR1cm4gQXJyYXkoMilcbiAgICAgICAgLmZpbGwodW5kZWZpbmVkKVxuICAgICAgICAubWFwKChfLCBpbmRleCkgPT4ge1xuICAgICAgICAgIGlmICghbG9jYWxHYW1lc1tpbmRleF0pIHtcbiAgICAgICAgICAgIHJldHVybiBfO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gbG9jYWxHYW1lc1tpbmRleF07XG4gICAgICAgIH0pXG4gICAgICAgIC5maWx0ZXIoKGkpID0+IGkpO1xuICAgIH1cbiAgICByZXR1cm4gZ2FtZXM7XG4gIH1cblxuICBnZXQgY2hhbm5lbHMoKSB7XG4gICAgcmV0dXJuIFsuLi5uZXcgU2V0KHRoaXMuZ2FtZXMubWFwKChnKSA9PiBnLkNoYW5uZWwpKV07XG4gIH1cblxuICBnZXQgc2Vhc29uKCkge1xuICAgIHJldHVybiB0aGlzLiRzdGF0ZS5zZWFzb247XG4gIH1cblxuICBnZXQgdGVhbXMoKTogUHMuU3BvcnREYXRhLk5GTC5UZWFtW10ge1xuICAgIHJldHVybiB0aGlzLiRzdGF0ZS50ZWFtcztcbiAgfVxuXG4gIGdldCBsb2FkaW5nKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLiRzdGF0ZS5sb2FkaW5nO1xuICB9XG5cbiAgZ2V0IGN1cnJlbnRXZWVrKCkge1xuICAgIHJldHVybiB0aGlzLmdhbWVzPy5hdCgwKT8uV2VlayA/PyAwO1xuICB9XG5cbiAgLyoqXG4gICAqIEluaXRpYWxpemUgdGhlIGluc3RhbmNlIHN0YXRlLlxuICAgKi9cbiAgYXN5bmMgaW5pdGlhbGl6ZSgpOiBQcm9taXNlPFBzLlNwb3J0RGF0YS5ORkwuSW5zdGFuY2U+IHtcbiAgICBcbiAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgnbmZsOmxvYWRpbmcnLCB7XG4gICAgICBidWJibGVzOiB0cnVlLFxuICAgICAgY2FuY2VsYWJsZTogdHJ1ZSxcbiAgICAgIGRldGFpbDogeyBsb2FkaW5nOiB0cnVlIH1cbiAgICB9KSlcblxuICAgIHRoaXMuJHN0YXRlLmxvYWRpbmcgPSB0cnVlO1xuICAgIGlmICh0aGlzLiRkZWJ1Z2dpbmcpIHtcbiAgICAgIHRoaXMuJHN0YXRlID0gYXdhaXQgdGhpcy5pbml0U3RhdGUoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy4kc3RhdGUgPSBhd2FpdCB0aGlzLiRjYWNoZS5nZXQ8TkZMSW5zdGFuY2VTdGF0ZT4oXG4gICAgICAgIGBORkxJbnN0YW5jZS5zeW5jLiR7dGhpcy4ka2V5fWAsXG4gICAgICAgIGFzeW5jICh7IGNhbmNlbCB9KSA9PiB7XG4gICAgICAgICAgY29uc3Qgc3RhdGUgPSBhd2FpdCB0aGlzLmluaXRTdGF0ZSgpO1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHN0YXRlLnRlYW1zLmxlbmd0aCA8IDEgfHxcbiAgICAgICAgICAgIHN0YXRlLmdhbWVzLmxlbmd0aCA8IDEgfHxcbiAgICAgICAgICAgICFzdGF0ZS5zZWFzb25cbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHJldHVybiBjYW5jZWwoc3RhdGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gc3RhdGU7XG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgfVxuICAgIFxuICAgIHRoaXMuJHN0YXRlLmxvYWRpbmcgPSBmYWxzZTtcbiAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgnbmZsOmxvYWRpbmcnLCB7XG4gICAgICBidWJibGVzOiB0cnVlLFxuICAgICAgY2FuY2VsYWJsZTogdHJ1ZSxcbiAgICAgIGRldGFpbDogeyBsb2FkaW5nOiBmYWxzZSB9XG4gICAgfSkpXG4gICAgXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBhc3luYyBmZXRjaFNlYXNvbkN1cnJlbnQoKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICBjb25zdCB7IGRhdGEsIGZhaWxlZCB9ID0gYXdhaXQgdGhpcy4kYXBpLmdldDxzdHJpbmc+KFxuICAgICAgXCJzY29yZXMvanNvbi9DdXJyZW50U2Vhc29uXCJcbiAgICApO1xuICAgIGlmIChmYWlsZWQpIHtcbiAgICAgIHJldHVybiBuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCkudG9TdHJpbmcoKTtcbiAgICB9XG4gICAgcmV0dXJuIGRhdGE7XG4gIH1cblxuICBhc3luYyBmZXRjaFNlYXNvbkdhbWVzKFxuICAgIHNlYXNvbjogc3RyaW5nXG4gICk6IFByb21pc2U8UHMuU3BvcnREYXRhLk5GTC5HYW1lU2NvcmVbXT4ge1xuICAgIGNvbnN0IHsgZGF0YSwgZmFpbGVkLCBtZXNzYWdlIH0gPSBhd2FpdCB0aGlzLiRhcGkuZ2V0PFxuICAgICAgUHMuU3BvcnREYXRhLk5GTC5HYW1lU2NvcmVbXVxuICAgID4oYHNjb3Jlcy9qc29uL1Njb3Jlcy8ke3NlYXNvbn1gKTtcbiAgICBpZiAoZmFpbGVkKSB7XG4gICAgICB0aHJvdyBUeXBlRXJyb3IoYE5GTEluc3RhbmNlLmZldGNoU2Vhc29uR2FtZXM6ICR7bWVzc2FnZX1gKTtcbiAgICB9XG4gICAgcmV0dXJuIGRhdGE7XG4gIH1cblxuICBhc3luYyBmZXRjaFNlYXNvblRlYW1zKHNlYXNvbjogc3RyaW5nKTogUHJvbWlzZTxQcy5TcG9ydERhdGEuTkZMLlRlYW1bXT4ge1xuICAgIGNvbnN0IHsgZGF0YSwgZmFpbGVkLCBtZXNzYWdlIH0gPSBhd2FpdCB0aGlzLiRhcGkuZ2V0PFxuICAgICAgUHMuU3BvcnREYXRhLk5GTC5UZWFtW11cbiAgICA+KGBzY29yZXMvanNvbi9UZWFtcy8ke3NlYXNvbn1gKTtcbiAgICBpZiAoZmFpbGVkKSB7XG4gICAgICB0aHJvdyBUeXBlRXJyb3IoYE5GTEluc3RhbmNlLmZldGNoU2Vhc29uVGVhbXM6ICR7bWVzc2FnZX1gKTtcbiAgICB9XG4gICAgcmV0dXJuIGRhdGE7XG4gIH1cblxuICBjb2xsZWN0QnlGaWx0ZXJzKFxuICAgIGNvbGxlY3Rpb246IFBzLlNwb3J0RGF0YS5ORkwuR2FtZVNjb3JlW10sXG4gICAgd2l0aG91dDogKFwiZGF0ZVwiIHwgXCJjaGFubmVsc1wiKVtdID0gW11cbiAgKTogUHMuU3BvcnREYXRhLk5GTC5HYW1lU2NvcmVbXSB7XG4gICAgaWYgKHRoaXMuJGZpbHRlcnM/LmRhdGUgJiYgIXdpdGhvdXQuaW5jbHVkZXMoXCJkYXRlXCIpKSB7XG4gICAgICBjb2xsZWN0aW9uID0gdGhpcy5jb2xsZWN0QnlGaWx0ZXJEYXRlKGNvbGxlY3Rpb24sIHRoaXMuJGZpbHRlcnMuZGF0ZSk7XG4gICAgfVxuXG4gICAgaWYgKFxuICAgICAgQXJyYXkuaXNBcnJheSh0aGlzLiRmaWx0ZXJzPy5jaGFubmVscykgJiZcbiAgICAgICF3aXRob3V0LmluY2x1ZGVzKFwiY2hhbm5lbHNcIilcbiAgICApIHtcbiAgICAgIGNvbGxlY3Rpb24gPSB0aGlzLmNvbGxlY3RCeUZpbHRlckNoYW5uZWxzKFxuICAgICAgICBjb2xsZWN0aW9uLFxuICAgICAgICB0aGlzLiRmaWx0ZXJzLmNoYW5uZWxzXG4gICAgICApO1xuICAgIH1cblxuICAgIHJldHVybiBjb2xsZWN0aW9uO1xuICB9XG5cbiAgY29sbGVjdEJ5RmlsdGVyQ2hhbm5lbHMoXG4gICAgY29sbGVjdGlvbjogUHMuU3BvcnREYXRhLk5GTC5HYW1lU2NvcmVbXSxcbiAgICBjaGFubmVsczogKFBzLlNwb3J0RGF0YS5DaGFubmVscyB8IG51bGwpW11cbiAgKSB7XG4gICAgcmV0dXJuIGNvbGxlY3Rpb24uZmlsdGVyKChnYW1lKSA9PiBjaGFubmVscy5pbmNsdWRlcyhnYW1lLkNoYW5uZWwpKTtcbiAgfVxuXG4gIGNvbGxlY3RCeUZpbHRlckRhdGUoXG4gICAgY29sbGVjdGlvbjogUHMuU3BvcnREYXRhLk5GTC5HYW1lU2NvcmVbXSxcbiAgICBkYXRlOiBzdHJpbmdcbiAgKTogUHMuU3BvcnREYXRhLk5GTC5HYW1lU2NvcmVbXSB7XG4gICAgcmV0dXJuIGNvbGxlY3Rpb24uZmlsdGVyKFxuICAgICAgKGdhbWUpID0+IGdhbWUuRGF5LnN1YnN0cmluZygwLCAxMCkgPT09IGRhdGUuc3Vic3RyaW5nKDAsIDEwKVxuICAgICk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGluaXRTdGF0ZSgpOiBQcm9taXNlPE5GTEluc3RhbmNlU3RhdGU+IHtcbiAgICBjb25zdCBzZWFzb24gPSBhd2FpdCB0aGlzLmZldGNoU2Vhc29uQ3VycmVudCgpO1xuICAgIGNvbnN0IGdhbWVzID0gYXdhaXQgdGhpcy5mZXRjaFNlYXNvbkdhbWVzKHNlYXNvbik7XG4gICAgY29uc3QgdGVhbXMgPSBhd2FpdCB0aGlzLmZldGNoU2Vhc29uVGVhbXMoc2Vhc29uKTtcbiAgICBjb25zdCB3ZWVrcyA9IGdhbWVzLnJlZHVjZSgoc3VtbWFyeSwgZ2FtZSkgPT4ge1xuICAgICAgaWYgKHN1bW1hcnkgPCBnYW1lLldlZWspIHtcbiAgICAgICAgcmV0dXJuIGdhbWUuV2VlaztcbiAgICAgIH1cbiAgICAgIHJldHVybiBzdW1tYXJ5O1xuICAgIH0sIDApO1xuICAgIHJldHVybiB7XG4gICAgICBzZWFzb24sXG4gICAgICB0ZWFtcyxcbiAgICAgIGdhbWVzLFxuICAgICAgd2Vla3MsXG4gICAgICBsb2FkaW5nOiBmYWxzZSxcbiAgICB9O1xuICB9XG59XG4iLCJpbXBvcnQge0FscGluZUNvbXBvbmVudH0gZnJvbSBcImFscGluZWpzXCI7XG5cbnR5cGUgTkZMR2FtZUJ5RGF0ZUNvbmZpZyA9IHtcbiAgZGF0ZTogRGF0ZVxuICBuZmw6IFBzLlNwb3J0RGF0YS5ORkwuSW5zdGFuY2Vcbn1cblxudHlwZSBORkxHYW1lc0NvbXBvbmVudCA9IEFscGluZUNvbXBvbmVudCAmIHtcbiAgYXBpOiBQcy5TcG9ydERhdGEuTkZMLkluc3RhbmNlXG4gIG9wZW5lZDogYm9vbGVhblxuICBzZWxlY3RlZDogUHMuU3BvcnREYXRhLk5GTC5HYW1lU2NvcmUgfCB7fVxuICBob21lVGVhbTogUHMuU3BvcnREYXRhLk5GTC5UZWFtIHwge31cbiAgYXdheVRlYW06IFBzLlNwb3J0RGF0YS5ORkwuVGVhbSB8IHt9XG4gIHJlYWRvbmx5IGxvYWRpbmc6IGJvb2xlYW5cbiAgcmVhZG9ubHkgIGdhbWVzOiBQcy5TcG9ydERhdGEuTkZMLkdhbWVTY29yZVtdXG4gIHJlYWRvbmx5IGhhc05vQXZhaWxhYmxlR2FtZXM6IGJvb2xlYW5cbiAgcmVhZG9ubHkgaXNSZWFkeTogYm9vbGVhblxuICB0ZWFtKGlkOiBudW1iZXIpOiBQcy5TcG9ydERhdGEuTkZMLlRlYW0gfCB7fVxuICBvcGVuKGdhbWU6IFBzLlNwb3J0RGF0YS5ORkwuR2FtZVNjb3JlKTogdm9pZFxuICBjbG9zZSgpOiB2b2lkXG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIChjb25maWc6IE5GTEdhbWVCeURhdGVDb25maWcpOiBORkxHYW1lc0NvbXBvbmVudCB7XG4gIHJldHVybiB7XG4gICAgYXBpOiBjb25maWcubmZsLFxuICAgIG9wZW5lZDogZmFsc2UsXG4gICAgc2VsZWN0ZWQ6IHt9LFxuICAgIGhvbWVUZWFtOiB7fSxcbiAgICBhd2F5VGVhbToge30sXG4gICAgYXN5bmMgaW5pdCgpIHtcbiAgICAgIGlmICghdGhpcy5sb2FkaW5nICYmICFjb25maWcubmZsLnNlYXNvbikge1xuICAgICAgICB0aGlzLmFwaS5pbml0aWFsaXplKClcbiAgICAgIH1cbiAgICB9LFxuICAgIGdldCBjdXJyZW50V2VlaygpIHtcbiAgICAgIHJldHVybiBjb25maWcubmZsPy5jdXJyZW50V2VlayA/PyAwXG4gICAgfSxcbiAgICBnZXQgd2Vla3MoKSB7XG4gICAgICByZXR1cm4gY29uZmlnLm5mbC53ZWVrc1xuICAgIH0sXG4gICAgZ2V0IGxvYWRpbmcoKSB7XG4gICAgICByZXR1cm4gY29uZmlnLm5mbC5sb2FkaW5nXG4gICAgfSxcbiAgICBnZXQgZ2FtZXMoKSB7XG4gICAgICByZXR1cm4gY29uZmlnLm5mbC5nYW1lc1xuICAgIH0sXG4gICAgZ2V0IGhhc05vQXZhaWxhYmxlR2FtZXMoKSB7XG4gICAgICByZXR1cm4gIXRoaXMubG9hZGluZyAmJiB0aGlzLmdhbWVzLmxlbmd0aCA8IDFcbiAgICB9LFxuICAgIGdldCBpc1JlYWR5KCkge1xuICAgICAgcmV0dXJuICF0aGlzLm9wZW5lZCAmJiAhdGhpcy5sb2FkaW5nICYmIHRoaXMuZ2FtZXMubGVuZ3RoID4gMFxuICAgIH0sXG4gICAgZ2V0IHNlYXNvblRpdGxlKCkge1xuICAgICAgaWYgKCF0aGlzLnNlbGVjdGVkKSB7XG4gICAgICAgIHJldHVybiAnJ1xuICAgICAgfVxuICAgICAgY29uc3Qgc2Vhc29uID0gKHRoaXMuc2VsZWN0ZWQgYXMgUHMuU3BvcnREYXRhLk5GTC5HYW1lU2NvcmUpLlNlYXNvbj8udG9TdHJpbmcoKVxuICAgICAgaWYgKHNlYXNvbj8uZW5kc1dpdGgoJ1BSRScpKSB7XG4gICAgICAgIHJldHVybiAnUHJlLVNlYXNvbic7XG4gICAgICB9XG4gICAgICBpZiAoc2Vhc29uPy5lbmRzV2l0aCgnUE9TVCcpKSB7XG4gICAgICAgIHJldHVybiAnUG9zdC1TZWFzb24nXG4gICAgICB9XG4gICAgICByZXR1cm4gJ1JlZ3VsYXIgU2Vhc29uJztcbiAgICB9LFxuICAgIGdldCBzdGFnZSgpIHtcbiAgICAgIGlmICghdGhpcy5zZWxlY3RlZCkge1xuICAgICAgICByZXR1cm4gJydcbiAgICAgIH1cbiAgICAgIGNvbnN0IGdhbWU6IFBzLlNwb3J0RGF0YS5ORkwuR2FtZVNjb3JlID0gdGhpcy5zZWxlY3RlZFxuICAgICAgaWYgKGdhbWUuU3RhdHVzID09PSBcIlNjaGVkdWxlZFwiKSB7XG4gICAgICAgIHJldHVybiBuZXcgSW50bC5EYXRlVGltZUZvcm1hdCh1bmRlZmluZWQsIHtcbiAgICAgICAgICBob3VyQ3ljbGU6ICdoMTInLFxuICAgICAgICAgIGhvdXI6IFwiMi1kaWdpdFwiLFxuICAgICAgICAgIG1pbnV0ZTogXCIyLWRpZ2l0XCJcbiAgICAgICAgfSkuZm9ybWF0KG5ldyBEYXRlKGdhbWUuRGF0ZVRpbWUpKVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gZ2FtZS5RdWFydGVyRGVzY3JpcHRpb24gPz8gZ2FtZS5TdGF0dXNcbiAgICB9LFxuICAgIHRlYW0oaWQpIHtcbiAgICAgIHJldHVybiBjb25maWcubmZsLnRlYW1zLmZpbmQodGVhbSA9PiB0ZWFtLlRlYW1JRCA9PT0gaWQpID8/IHt9XG4gICAgfSxcbiAgICBvcGVuKGdhbWUpIHtcbiAgICAgIHRoaXMuc2VsZWN0ZWQgPSBnYW1lXG4gICAgICB0aGlzLmhvbWVUZWFtID0gdGhpcy50ZWFtKGdhbWUuSG9tZVRlYW1JRClcbiAgICAgIHRoaXMuYXdheVRlYW0gPSB0aGlzLnRlYW0oZ2FtZS5Bd2F5VGVhbUlEKVxuICAgICAgdGhpcy5vcGVuZWQgPSB0cnVlXG4gICAgICByZXR1cm4gZ2FtZVxuICAgIH0sXG4gICAgY2xvc2UoKSB7XG4gICAgICB0aGlzLnNlbGVjdGVkID0ge31cbiAgICAgIHRoaXMuaG9tZVRlYW0gPSB7fVxuICAgICAgdGhpcy5hd2F5VGVhbSA9IHt9XG4gICAgICB0aGlzLm9wZW5lZCA9IGZhbHNlXG4gICAgfSxcbiAgfVxufSIsImltcG9ydCBBcGkgZnJvbSAnLi4vLi4vLi4vY29yZS9TdXBwb3J0L1BzQXBpJ1xuaW1wb3J0IE5mbEluc3RhbmNlIGZyb20gXCIuLi9TZXJ2aWNlcy9OZmxJbnN0YW5jZS50c1wiO1xuaW1wb3J0IE5GTEdhbWVzQnlEYXRlIGZyb20gXCIuLi9Db21wb25lbnRzL05GTEdhbWVzQnlEYXRlLnRzXCI7XG5pbXBvcnQge0FscGluZX0gZnJvbSBcImFscGluZWpzXCI7XG5cbi8qKlxuICogTkZMIEFwaSBjb25uZWN0b3IuXG4gKiBUaGlzIHNlcnZpY2UgcHJvdmlkZXIgcHJvdmlkZXMgYW4gYXBpIHRvIGludGVyYWN0IHdpdGggTkZMIGFwaSBmcm9tIFNwb3J0RGF0YS5cbiAqXG4gKiBAYXV0aG9yIERlbHZpIE1hcnRlIDxkZWx2aUBwYWRzcXVhZC5jb20+XG4gKiBAcGFja2FnZSBTcG9ydERhdGFcbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU3BvcnREYXRhTkZMUHJvdmlkZXIgaW1wbGVtZW50cyBQcy5Qcm92aWRlci5JbnRlcmZhY2Uge1xuICAvKipcbiAgICogTmV0d29yayBTZXJ2aWNlXG4gICAqL1xuICBwcm90ZWN0ZWQgYXBpPzogUHMuU3VwcG9ydC5BcGkuSW5zdGFuY2U7XG5cbiAgLyoqXG4gICAqIENhY2hpbmcgc2VydmljZVxuICAgKi9cbiAgcHJvdGVjdGVkIGNhY2hlPzogUHMuU3VwcG9ydC5DYWNoZS5JbnN0YW5jZTtcbiAgLyoqXG4gICAqIE5GTCBTZXJ2aWNlXG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIHByb3RlY3RlZCBzZXJ2aWNlPzogUHMuU3BvcnREYXRhLk5GTC5JbnN0YW5jZTtcblxuICAvKipcbiAgICogQWxwaW5lIHNlcnZpY2UuXG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIHByb3RlY3RlZCBhbHBpbmU/OiBBbHBpbmVcblxuICBrZXkoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gJ1Nwb3J0RGF0YU5GTCdcbiAgfVxuXG4gIGFzeW5jIGJvb3Qoe1xuICAgICAgICAgICAgICAgZGVidWcsXG4gICAgICAgICAgICAgICBwYXJhbWV0ZXJzXG4gICAgICAgICAgICAgfTogUHMuUHJvdmlkZXIuQ29udGV4dDxQcy5JbnN0YW5jZS5TcG9ydERhdGFORkxDb25maWc+KSB7XG4gICAgaWYgKCF0aGlzLmNhY2hlKSB7XG4gICAgICB0aHJvdyBUeXBlRXJyb3IoJ1tQYWRTcXVhZF06TkZMIC0gU2VydmljZSBbY2FjaGVdIGlzIHJlcXVpcmVkLicpXG4gICAgfVxuICAgIGlmICghdGhpcy5hcGkpIHtcbiAgICAgIHRocm93IFR5cGVFcnJvcignW1BhZFNxdWFkXTpORkwgLSBTZXJ2aWNlIFthcGldIGlzIHJlcXVpcmVkLicpXG4gICAgfVxuICAgIGlmICghdGhpcy5zZXJ2aWNlKSB7XG4gICAgICB0aHJvdyBUeXBlRXJyb3IoJ1tQYWRTcXVhZF06TkZMIC0gU2VydmljZSBbTkZMXSBtdXN0IGJlIGluc3RhbnRpYXRlZC4nKVxuICAgIH1cblxuICAgIGlmIChkZWJ1Zykge1xuICAgICAgY29uc29sZS5kZWJ1ZyhgW1BhZFNxdWFkXToke3RoaXMua2V5KCl9IFNwb3J0IGRhdGEgQk9PVEVELmApXG4gICAgfVxuICAgIGlmIChwYXJhbWV0ZXJzPy5zdGFydE9uQm9vdCkge1xuICAgICAgYXdhaXQgdGhpcy5zZXJ2aWNlLmluaXRpYWxpemUoKVxuICAgIH1cblxuICAgIHJldHVybiB0aGlzLnNlcnZpY2VcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyByZWdpc3RlcihjdHg6IFBzLlByb3ZpZGVyLkNvbnRleHQ8UHMuSW5zdGFuY2UuU3BvcnREYXRhTkZMQ29uZmlnPikge1xuICAgIGlmIChjdHguZGVidWcpIHtcbiAgICAgIGNvbnNvbGUuZGVidWcoYFtQYWRTcXVhZF06JHt0aGlzLmtleSgpfSBTcG9ydCBkYXRhIFJFR0lTVEVSRUQuYClcbiAgICB9XG5cbiAgICB0aGlzLmFwaSA9IG5ldyBBcGkoe1xuICAgICAgYXBpVG9rZW46IGAke2N0eC5wYXJhbWV0ZXJzPy50b2tlbn1gLFxuICAgICAgYmFzZVVybDogJ2h0dHBzOi8vYXBpLnNwb3J0c2RhdGEuaW8vdjMvbmZsLycsXG4gICAgICBhcGlLZXlOYW1lOiAna2V5JyxcbiAgICAgIGF1dGhvcml6YXRpb246ICdrZXknLFxuICAgIH0pXG5cbiAgICB0aGlzLmNhY2hlID0gY3R4LmVuZ2luZS5nZXQ8UHMuU3VwcG9ydC5DYWNoZS5JbnN0YW5jZT4oJ2NhY2hlJylcblxuICAgIHRoaXMuc2VydmljZSA9IG5ldyBOZmxJbnN0YW5jZSh7XG4gICAgICBrZXk6IGN0eC5wYXJhbWV0ZXJzPy5kYXRlID8/IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgIGFwaTogdGhpcy5hcGksXG4gICAgICBkZWJ1ZzogY3R4LmRlYnVnLFxuICAgICAgY2FjaGU6IHRoaXMuY2FjaGUgYXMgUHMuU3VwcG9ydC5DYWNoZS5JbnN0YW5jZSxcbiAgICAgIGZpbHRlcnM6IHtcbiAgICAgICAgZGF0ZTogY3R4LnBhcmFtZXRlcnM/LmRhdGUsXG4gICAgICAgIGNoYW5uZWxzOiBjdHgucGFyYW1ldGVycz8uY2hhbm5lbHMsXG4gICAgICB9XG4gICAgfSlcblxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2FscGluZTppbml0JywgKCkgPT4ge1xuICAgICAgdGhpcy5hbHBpbmUgPSBjdHguZW5naW5lLmdldDxBbHBpbmU+KCdhbHBpbmUnKVxuICAgICAgdGhpcy5yZWdpc3RlckNvbXBvbmVudHMoY3R4KVxuICAgIH0pXG4gIH1cblxuXG4gIHByb3RlY3RlZCByZWdpc3RlckNvbXBvbmVudHMoe3BhcmFtZXRlcnN9OiBQcy5Qcm92aWRlci5Db250ZXh0KSB7XG5cbiAgICB0aGlzLmFscGluZT8uZGF0YSgnTkZMR2FtZXNCeURhdGUnLCAoaW5pdGlhbFN0YXRlQXJncykgPT5cbiAgICAgICAgTkZMR2FtZXNCeURhdGUoe1xuICAgICAgICAgIG5mbDogdGhpcy5zZXJ2aWNlIGFzIFBzLlNwb3J0RGF0YS5ORkwuSW5zdGFuY2UsXG4gICAgICAgICAgZGF0ZTogaW5pdGlhbFN0YXRlQXJncyA/PyBwYXJhbWV0ZXJzPy5kYXRlLFxuICAgICAgICB9KVxuICAgIClcbiAgfVxufSJdLCJuYW1lcyI6WyJQc0FwaSIsImNvbmZpZyIsIl9fcHVibGljRmllbGQiLCJwYXRoIiwicGFyYW1zIiwicmVzcG9uc2UiLCJxdWVyeSIsInF1ZXJ5U3RyaW5nIiwiTmZsSW5zdGFuY2UiLCJhcGkiLCJjYWNoZSIsImtleSIsImRlYnVnIiwiZmlsdGVycyIsIkFscGluZSIsImdhbWVzIiwibG9jYWxHYW1lcyIsIl8iLCJpbmRleCIsImkiLCJnIiwiX2IiLCJfYSIsImNhbmNlbCIsInN0YXRlIiwiZGF0YSIsImZhaWxlZCIsInNlYXNvbiIsIm1lc3NhZ2UiLCJjb2xsZWN0aW9uIiwid2l0aG91dCIsImNoYW5uZWxzIiwiZ2FtZSIsImRhdGUiLCJ0ZWFtcyIsIndlZWtzIiwic3VtbWFyeSIsIk5GTEdhbWVzQnlEYXRlIiwiaWQiLCJ0ZWFtIiwiU3BvcnREYXRhTkZMUHJvdmlkZXIiLCJwYXJhbWV0ZXJzIiwiY3R4IiwiQXBpIiwiX2MiLCJfZCIsImluaXRpYWxTdGF0ZUFyZ3MiXSwibWFwcGluZ3MiOiI7Ozs7QUFJQSxNQUFxQkEsRUFBTTtBQUFBLEVBR3pCLFlBQVlDLEdBQStCO0FBRm5DLElBQUFDLEVBQUE7QUFHTixTQUFLLFVBQVVEO0FBQUEsRUFDakI7QUFBQSxFQUVBLE1BQWEsSUFBT0UsR0FBY0MsR0FBaUM7QUFDakUsVUFBTUMsSUFBVyxNQUFNLE1BQU0sS0FBSyxJQUFJRixHQUFNQyxDQUFNLENBQUM7QUFFL0MsV0FBQ0MsRUFBUyxLQVFxQjtBQUFBLE1BQ2pDLFFBQVE7QUFBQSxNQUNSLFNBQVNBLEVBQVM7QUFBQSxNQUNsQixNQUFPLE1BQU1BLEVBQVMsS0FBWSxLQUFBLE1BQU1BLEVBQVMsS0FBSztBQUFBLElBQUEsSUFWdEI7QUFBQSxNQUM5QixRQUFRO0FBQUEsTUFDUixTQUFTQSxFQUFTO0FBQUEsTUFDbEIsTUFBTSxDQUFDO0FBQUEsSUFBQTtBQUFBLEVBU2I7QUFBQSxFQUVRLElBQUlGLEdBQWNDLEdBQWlDO0FBQ25ELFVBQUFFLElBQVEsSUFBSSxnQkFBZ0JGLENBQU07QUFDcEMsSUFBQSxLQUFLLFFBQVEsa0JBQWtCLFNBQ2pDRSxFQUFNLElBQUksS0FBSyxRQUFRLFlBQVksS0FBSyxRQUFRLFFBQVE7QUFHcEQsVUFBQUMsSUFBY0QsRUFBTTtBQUMxQixXQUFPLElBQUksSUFBSSxHQUFHSCxDQUFJLEdBQUdJLElBQWMsTUFBTUEsSUFBYyxFQUFFLElBQUksS0FBSyxRQUFRLE9BQU87QUFBQSxFQUN2RjtBQUNGO0FDakJBLE1BQXFCQyxFQUFpRDtBQUFBLEVBZXBFLFlBQVksRUFBRSxLQUFBQyxHQUFLLE9BQUFDLEdBQU8sS0FBQUMsR0FBSyxPQUFBQyxHQUFPLFNBQUFDLEtBQXdCO0FBZDdDLElBQUFY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
